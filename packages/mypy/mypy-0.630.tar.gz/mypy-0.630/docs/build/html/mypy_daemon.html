
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Mypy daemon (mypy server) &#8212; Mypy 0.630+dev-734a166d380bfb0de05ce0e3c61dc7e675898e9c-dirty documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using installed packages" href="installed_packages.html" />
    <link rel="prev" title="The mypy configuration file" href="config_file.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="installed_packages.html" title="Using installed packages"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="config_file.html" title="The mypy configuration file"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Mypy 0.630+dev-734a166d380bfb0de05ce0e3c61dc7e675898e9c-dirty documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mypy-daemon-mypy-server">
<span id="mypy-daemon"></span><h1>Mypy daemon (mypy server)<a class="headerlink" href="#mypy-daemon-mypy-server" title="Permalink to this headline">¶</a></h1>
<p>Instead of running mypy as a command-line tool, you can also run it as
a long-running daemon (server) process and use a command-line client to
send type-checking requests to the server.  This way mypy can perform type
checking much faster, since program state cached from previous runs is kept
in memory and doesn’t have to be read from the file system on each run.
The server also uses finer-grained dependency tracking to reduce the amount
of work that needs to be done.</p>
<p>If you have a large codebase to check, running mypy using the mypy
daemon can be <em>10 or more times faster</em> than the regular command-line
<code class="docutils literal notranslate"><span class="pre">mypy</span></code> tool, especially if your workflow involves running mypy
repeatedly after small edits – which is often a good idea, as this way
you’ll find errors sooner.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The mypy daemon is experimental. In particular, the command-line
interface may change in future mypy releases.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The mypy daemon currently supports macOS and Linux only.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Each mypy daemon process supports one user and one set of source files,
and it can only process one type checking request at a time. You can
run multiple mypy daemon processes to type check multiple repositories.</p>
</div>
<div class="section" id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>The client utility <code class="docutils literal notranslate"><span class="pre">dmypy</span></code> is used to control the mypy daemon.
Use <code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">run</span> <span class="pre">--</span> <span class="pre">&lt;flags&gt;</span> <span class="pre">&lt;files&gt;</span></code> to typecheck a set of files
(or directories). This will launch the daemon if it is not running.
You can use almost arbitrary mypy flags after <code class="docutils literal notranslate"><span class="pre">--</span></code>.  The daemon
will always run on the current host. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dmypy</span> <span class="n">run</span> <span class="o">--</span> <span class="o">--</span><span class="n">follow</span><span class="o">-</span><span class="n">imports</span><span class="o">=</span><span class="n">error</span> <span class="n">prog</span><span class="o">.</span><span class="n">py</span> <span class="n">pkg1</span><span class="o">/</span> <span class="n">pkg2</span><span class="o">/</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You’ll need to use either the <code class="docutils literal notranslate"><span class="pre">--follow-imports=error</span></code> or the
<code class="docutils literal notranslate"><span class="pre">--follow-imports=skip</span></code> option with dmypy because the current
implementation can’t follow imports.
See <a class="reference internal" href="running_mypy.html#follow-imports"><span class="std std-ref">Following imports</span></a> for details on how these work.
You can also define these using a
<a class="reference internal" href="config_file.html#config-file"><span class="std std-ref">configuration file</span></a>.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">run</span></code> will automatically restart the daemon if the
configuration or mypy version changes.</p>
<p>You need to provide all files or directories you want to type check
(other than stubs) as arguments. This is a result of the
<code class="docutils literal notranslate"><span class="pre">--follow-imports</span></code> restriction mentioned above.</p>
<p>The initial run will process all the code and may take a while to
finish, but subsequent runs will be quick, especially if you’ve only
changed a few files. You can use <a class="reference internal" href="additional_features.html#remote-cache"><span class="std std-ref">remote caching</span></a>
to speed up the initial run. The speedup can be significant if
you have a large codebase.</p>
</div>
<div class="section" id="additional-features">
<h2>Additional features<a class="headerlink" href="#additional-features" title="Permalink to this headline">¶</a></h2>
<p>While <code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">run</span></code> is sufficient for most uses, some workflows
(ones using <a class="reference internal" href="additional_features.html#remote-cache"><span class="std std-ref">remote caching</span></a>, perhaps),
require more precise control over the lifetime of the daemon process:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">stop</span></code> stops the daemon.</li>
<li><code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">start</span> <span class="pre">--</span> <span class="pre">&lt;flags&gt;</span></code> starts the daemon but does not check any files.
You can use almost arbitrary mypy flags after <code class="docutils literal notranslate"><span class="pre">--</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">restart</span> <span class="pre">--</span> <span class="pre">&lt;flags&gt;</span></code> restarts the daemon. The flags are the same
as with <code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">start</span></code>. This is equivalent to a stop command followed
by a start.</li>
<li>Use <code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">run</span> <span class="pre">--timeout</span> <span class="pre">SECONDS</span> <span class="pre">--</span> <span class="pre">&lt;flags&gt;</span></code> (or
<code class="docutils literal notranslate"><span class="pre">start</span></code> or <code class="docutils literal notranslate"><span class="pre">restart</span></code>) to automatically
shut down the daemon after inactivity. By default, the daemon runs
until it’s explicitly stopped.</li>
<li><code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">check</span> <span class="pre">&lt;files&gt;</span></code> checks a set of files using an already
running daemon.</li>
<li><code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">status</span></code> checks whether a daemon is running. It prints a
diagnostic and exits with <code class="docutils literal notranslate"><span class="pre">0</span></code> if there is a running daemon.</li>
</ul>
<p>Use <code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">--help</span></code> for help on additional commands and command-line
options not discussed here, and <code class="docutils literal notranslate"><span class="pre">dmypy</span> <span class="pre">&lt;command&gt;</span> <span class="pre">--help</span></code> for help on
command-specific options.</p>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>You have to use either the <code class="docutils literal notranslate"><span class="pre">--follow-imports=error</span></code> or
the <code class="docutils literal notranslate"><span class="pre">--follow-imports=skip</span></code> option because of an implementation
limitation. This can be defined
through the command line or through a
<a class="reference internal" href="config_file.html#config-file"><span class="std std-ref">configuration file</span></a>.</li>
<li>Windows is not supported.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Mypy daemon (mypy server)</a><ul>
<li><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li><a class="reference internal" href="#additional-features">Additional features</a></li>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="config_file.html"
                        title="previous chapter">The mypy configuration file</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="installed_packages.html"
                        title="next chapter">Using installed packages</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/mypy_daemon.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="installed_packages.html" title="Using installed packages"
             >next</a> |</li>
        <li class="right" >
          <a href="config_file.html" title="The mypy configuration file"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Mypy 0.630+dev-734a166d380bfb0de05ce0e3c61dc7e675898e9c-dirty documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Jukka Lehtosalo.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>