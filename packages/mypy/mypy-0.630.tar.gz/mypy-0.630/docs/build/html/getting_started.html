
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Getting started &#8212; Mypy 0.630+dev-734a166d380bfb0de05ce0e3c61dc7e675898e9c-dirty documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using mypy with an existing codebase" href="existing_code.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="existing_code.html" title="Using mypy with an existing codebase"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Mypy 0.630+dev-734a166d380bfb0de05ce0e3c61dc7e675898e9c-dirty documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<span id="id1"></span><h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>This chapter introduces some core concepts of mypy, including function
annotations, the <code class="docutils literal notranslate"><span class="pre">typing</span></code> module and library stubs. Read it carefully,
as the rest of documentation may not make much sense otherwise.</p>
<div class="section" id="installing-mypy">
<h2>Installing mypy<a class="headerlink" href="#installing-mypy" title="Permalink to this headline">¶</a></h2>
<p>Mypy requires Python 3.4 or later to run.  Once you’ve
<a class="reference external" href="https://www.python.org/downloads/">installed Python 3</a>,
you can install mypy using pip:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>python3 -m pip install mypy
</pre></div>
</div>
<p>Note that even though you need Python 3 to run <code class="docutils literal notranslate"><span class="pre">mypy</span></code>, type checking
Python 2 code is fully supported, as discussed later in <a class="reference internal" href="python2.html#python2"><span class="std std-ref">Type checking Python 2 code</span></a>.</p>
</div>
<div class="section" id="running-mypy">
<h2>Running mypy<a class="headerlink" href="#running-mypy" title="Permalink to this headline">¶</a></h2>
<p>You can type check a program by using the <code class="docutils literal notranslate"><span class="pre">mypy</span></code> tool, which is
basically a linter – it checks your program for errors without actually
running it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mypy program.py
</pre></div>
</div>
<p>All errors reported by mypy are essentially warnings that you are free
to ignore, if you so wish.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Depending on how mypy is configured, you may have to run mypy like
this:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m mypy program.py
</pre></div>
</div>
</div>
<p>If you haven’t added any type annotations to your program yet, you
should add some first, as mypy won’t report many errors in unannotated
functions. Don’t worry if you aren’t familiar with type annotations –
we’ll discuss them in detail in much of the rest of this guide.</p>
<p>Mypy supports many command line options that you can use to tweak how
mypy behaves.  They are documented in <a class="reference internal" href="command_line.html#command-line"><span class="std std-ref">The mypy command line</span></a>.</p>
</div>
<div class="section" id="function-signatures">
<h2>Function signatures<a class="headerlink" href="#function-signatures" title="Permalink to this headline">¶</a></h2>
<p>A function without a type annotation is considered <em>dynamically typed</em> by
mypy:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;Hello, {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>You can declare the signature of a function using the Python 3
annotation syntax (Python 2 is discussed later in <a class="reference internal" href="python2.html#python2"><span class="std std-ref">Type checking Python 2 code</span></a>).
This makes the function statically typed, which causes mypy to
report type errors within the function.</p>
<p>Here’s a version of the above function that is statically typed and
will be type checked:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="s1">&#39;Hello, {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Now mypy will reject the following call, since the argument has an
incompatible type:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="s1">&#39;Hello, {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="n">greeting</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;Alice&#39;</span><span class="p">)</span>  <span class="c1"># Argument 1 to &quot;greeting&quot; has incompatible type &quot;bytes&quot;; expected &quot;str&quot;</span>
</pre></div>
</div>
<p>If a function does not explicitly return a value we give the return
type as <code class="docutils literal notranslate"><span class="pre">None</span></code>. Using a <code class="docutils literal notranslate"><span class="pre">None</span></code> result in a statically typed
context results in a type check error:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">p</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">p</span><span class="p">()</span>  <span class="c1"># Error: &quot;p&quot; does not return a value</span>
</pre></div>
</div>
<p>Arguments with default values can be annotated as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">excited</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;Hello, {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">excited</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">+=</span> <span class="s1">&#39;!!!&#39;</span>
    <span class="k">return</span> <span class="n">message</span>
</pre></div>
</div>
<p>Mixing dynamic and static typing within a single file is often
useful. For example, if you are migrating existing Python code to
static typing, it may be easiest to do this incrementally, such as by
migrating a few functions at a time. Also, when prototyping a new
feature, you may decide to first implement the relevant code using
dynamic typing and only add type signatures later, when the code is
more stable.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="mi">1</span> <span class="o">+</span> <span class="s1">&#39;x&#39;</span>  <span class="c1"># No static type error (dynamically typed)</span>

<span class="k">def</span> <span class="nf">g</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="mi">1</span> <span class="o">+</span> <span class="s1">&#39;x&#39;</span>  <span class="c1"># Type check error (statically typed)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The earlier stages of mypy, known as the semantic analysis, may
report errors even for dynamically typed functions. However, you
should not rely on this, as this may change in the future.</p>
</div>
</div>
<div class="section" id="the-typing-module">
<h2>The typing module<a class="headerlink" href="#the-typing-module" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">typing</span></code> module contains many definitions that are useful in
statically typed code. You typically use <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">...</span> <span class="pre">import</span></code> to import
them (we’ll explain <code class="docutils literal notranslate"><span class="pre">Iterable</span></code> later in this document):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span>

<span class="k">def</span> <span class="nf">greet_all</span><span class="p">(</span><span class="n">names</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Hello, {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>For brevity, we often omit the <code class="docutils literal notranslate"><span class="pre">typing</span></code> import in code examples, but
mypy will give an error if you use definitions such as <code class="docutils literal notranslate"><span class="pre">Iterable</span></code>
without first importing them.</p>
</div>
<div class="section" id="library-stubs-and-typeshed">
<span id="stubs-intro"></span><h2>Library stubs and typeshed<a class="headerlink" href="#library-stubs-and-typeshed" title="Permalink to this headline">¶</a></h2>
<p>Mypy uses library <em>stubs</em> to type check code interacting with library
modules, including the Python standard library. A library stub defines
a skeleton of the public interface of the library, including classes,
variables and functions, and their types. Mypy ships with stubs from
the <a class="reference external" href="https://github.com/python/typeshed">typeshed</a> project, which
contains library stubs for the Python builtins, the standard library,
and selected third-party packages.</p>
<p>For example, consider this code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Without a library stub, mypy would have no way of inferring the type of <code class="docutils literal notranslate"><span class="pre">x</span></code>
and checking that the argument to <code class="docutils literal notranslate"><span class="pre">chr</span></code> has a valid type.</p>
<p>Mypy complains if it can’t find a stub (or a real module) for a
library module that you import. Some modules ship with stubs that mypy
can automatically find, or you can install a 3rd party module with
additional stubs (see <a class="reference internal" href="installed_packages.html#installed-packages"><span class="std std-ref">Using installed packages</span></a> for details).  You can
also <a class="reference internal" href="stubs.html#stub-files"><span class="std std-ref">create stubs</span></a> easily. We discuss ways of
silencing complaints about missing stubs in <a class="reference internal" href="existing_code.html#existing-code"><span class="std std-ref">Using mypy with an existing codebase</span></a>.</p>
</div>
<div class="section" id="next-steps">
<h2>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>If you are in a hurry and don’t want to read lots of documentation
before getting started, here are some pointers to quick learning
resources:</p>
<ul class="simple">
<li>Read the <a class="reference internal" href="cheat_sheet_py3.html#cheat-sheet-py3"><span class="std std-ref">mypy cheatsheet</span></a> (also for
<a class="reference internal" href="cheat_sheet.html#cheat-sheet-py2"><span class="std std-ref">Python 2</span></a>).</li>
<li>Read <a class="reference internal" href="existing_code.html#existing-code"><span class="std std-ref">Using mypy with an existing codebase</span></a> if you have a significant existing
codebase without many type annotations.</li>
<li>Read the <a class="reference external" href="https://blog.zulip.org/2016/10/13/static-types-in-python-oh-mypy/">blog post</a>
about the Zulip project’s experiences with adopting mypy.</li>
<li>If you prefer watching talks instead of reading, here are
some ideas:<ul>
<li>Carl Meyer:
<a class="reference external" href="https://www.youtube.com/watch?v=pMgmKJyWKn8">Type Checked Python in the Real World</a>
(PyCon 2018)</li>
<li>Greg Price:
<a class="reference external" href="https://www.youtube.com/watch?v=0c46YHS3RY8">Clearer Code at Scale: Static Types at Zulip and Dropbox</a>
(PyCon 2018)</li>
</ul>
</li>
<li>Look at <a class="reference internal" href="common_issues.html#common-issues"><span class="std std-ref">solutions to common issues</span></a> with mypy if
you encounter problems.</li>
<li>You can ask questions about mypy in the
<a class="reference external" href="https://github.com/python/mypy/issues">mypy issue tracker</a> and
typing <a class="reference external" href="https://gitter.im/python/typing">Gitter chat</a>.</li>
</ul>
<p>You can also continue reading this document and skip sections that
aren’t relevant for you. You don’t need to read sections in order.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting started</a><ul>
<li><a class="reference internal" href="#installing-mypy">Installing mypy</a></li>
<li><a class="reference internal" href="#running-mypy">Running mypy</a></li>
<li><a class="reference internal" href="#function-signatures">Function signatures</a></li>
<li><a class="reference internal" href="#the-typing-module">The typing module</a></li>
<li><a class="reference internal" href="#library-stubs-and-typeshed">Library stubs and typeshed</a></li>
<li><a class="reference internal" href="#next-steps">Next steps</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="introduction.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="existing_code.html"
                        title="next chapter">Using mypy with an existing codebase</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/getting_started.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="existing_code.html" title="Using mypy with an existing codebase"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Mypy 0.630+dev-734a166d380bfb0de05ce0e3c61dc7e675898e9c-dirty documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Jukka Lehtosalo.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>