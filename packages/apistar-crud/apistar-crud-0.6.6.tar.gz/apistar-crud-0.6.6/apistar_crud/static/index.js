(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{143:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteResourceElementFailure=t.deleteResourceElementSuccess=t.deleteResourceElementRequest=t.updateResourceElementFailure=t.updateResourceElementSuccess=t.updateResourceElementRequest=t.submitResourceFailure=t.submitResourceSuccess=t.submitResourceRequest=t.fetchCurrentResourceFailure=t.fetchCurrentResourceSuccess=t.fetchCurrentResourceRequest=t.fetchResourceEntitiesFailure=t.fetchResourceEntitiesSuccess=t.fetchResourceEntitiesRequest=t.DELETE_RESOURCE_ELEMENT_FAILURE=t.DELETE_RESOURCE_ELEMENT_SUCCESS=t.DELETE_RESOURCE_ELEMENT_REQUEST=t.UPDATE_RESOURCE_ELEMENT_FAILURE=t.UPDATE_RESOURCE_ELEMENT_SUCCESS=t.UPDATE_RESOURCE_ELEMENT_REQUEST=t.SUBMIT_RESOURCE_FAILURE=t.SUBMIT_RESOURCE_SUCCESS=t.SUBMIT_RESOURCE_REQUEST=t.FETCH_CURRENT_RESOURCE_FAILURE=t.FETCH_CURRENT_RESOURCE_SUCCESS=t.FETCH_CURRENT_RESOURCE_REQUEST=t.FETCH_RESOURCE_ENTITIES_FAILURE=t.FETCH_RESOURCE_ENTITIES_SUCCESS=t.FETCH_RESOURCE_ENTITIES_REQUEST=void 0;var u,a=f(r(141)),n=f(r(116)),s=f(r(140)),l=f(r(117)),c=f(r(771)),o=f(r(142)),i=f(r(71)),d=r(448);function f(e){return e&&e.__esModule?e:{default:e}}var p=t.FETCH_RESOURCE_ENTITIES_REQUEST="resource/entities/fetch/REQUEST",m=t.FETCH_RESOURCE_ENTITIES_SUCCESS="resource/entities/fetch/SUCCESS",E=t.FETCH_RESOURCE_ENTITIES_FAILURE="resource/entities/fetch/FAILURE",h=t.FETCH_CURRENT_RESOURCE_REQUEST="resource/current-resource/REQUEST",v=t.FETCH_CURRENT_RESOURCE_SUCCESS="resource/current-resource/SUCCESS",R=t.FETCH_CURRENT_RESOURCE_FAILURE="resource/current-resource/FAILURE",_=t.SUBMIT_RESOURCE_REQUEST="resource/submit/REQUEST",y=t.SUBMIT_RESOURCE_SUCCESS="resource/submit/SUCCESS",S=t.SUBMIT_RESOURCE_FAILURE="resource/submit/FAILURE",C=t.UPDATE_RESOURCE_ELEMENT_REQUEST="resource/update/REQUEST",b=t.UPDATE_RESOURCE_ELEMENT_SUCCESS="resource/update/SUCCESS",M=t.UPDATE_RESOURCE_ELEMENT_FAILURE="resource/update/FAILURE",g=t.DELETE_RESOURCE_ELEMENT_REQUEST="resource/delete/REQUEST",T=t.DELETE_RESOURCE_ELEMENT_SUCCESS="resource/delete/SUCCESS",k=t.DELETE_RESOURCE_ELEMENT_FAILURE="resource/delete/FAILURE";t.fetchResourceEntitiesRequest=(0,d.createAction)(p),t.fetchResourceEntitiesSuccess=(0,d.createAction)(m),t.fetchResourceEntitiesFailure=(0,d.createAction)(E),t.fetchCurrentResourceRequest=(0,d.createAction)(h),t.fetchCurrentResourceSuccess=(0,d.createAction)(v),t.fetchCurrentResourceFailure=(0,d.createAction)(R),t.submitResourceRequest=(0,d.createAction)(_),t.submitResourceSuccess=(0,d.createAction)(y),t.submitResourceFailure=(0,d.createAction)(S),t.updateResourceElementRequest=(0,d.createAction)(C),t.updateResourceElementSuccess=(0,d.createAction)(b),t.updateResourceElementFailure=(0,d.createAction)(M),t.deleteResourceElementRequest=(0,d.createAction)(g),t.deleteResourceElementSuccess=(0,d.createAction)(T),t.deleteResourceElementFailure=(0,d.createAction)(k);t.default=(0,d.handleActions)((u={},(0,a.default)(u,p,function(e){return(0,i.default)({},e,{isFetching:!0})}),(0,a.default)(u,m,function(e,t){var r=t.payload,u=r.ids,a=r.entities,n=r.name,s=r.verboseName,l=r.rowsPerPage,d=r.totalCount,f=r.currentPage;return(0,i.default)({},e,{currentEntity:null,ids:[].concat((0,o.default)(new c.default([].concat((0,o.default)(u))))),entities:(0,i.default)({},a),name:n,verboseName:s,rowsPerPage:l,totalCount:d,currentPage:f,isFetching:!1})}),(0,a.default)(u,h,function(e){return(0,i.default)({},e,{isFetching:!1})}),(0,a.default)(u,v,function(e,t){var r=t.payload,u=r.name,a=r.verboseName,n=r.currentEntity,s=r.entities;return(0,i.default)({},e,{name:u,verboseName:a,currentEntity:n,ids:[].concat((0,o.default)(new c.default([].concat((0,o.default)(e.entities),[n])))),entities:(0,i.default)({},e.entities,s),isFetching:!1})}),(0,a.default)(u,(0,d.combineActions)(y,b),function(e,t){var r=t.payload.entities;return(0,i.default)({},e,{entities:(0,i.default)({},e.entities,r)})}),(0,a.default)(u,T,function(e,t){var r=t.payload.resourceId;return(0,i.default)({},e,{entities:l.default.apply(Object,(0,o.default)((0,s.default)(e.entities).filter(function(e){return(0,n.default)(e,1)[0]!=r}).map(function(e){var t=(0,n.default)(e,2),r=t[0],u=t[1];return(0,a.default)({},r,u)}))),ids:e.ids.filter(function(e){return e!=r})})}),(0,a.default)(u,(0,d.combineActions)(E,R,S,M,k),function(e,t){var r=t.payload;return(0,i.default)({},e,{errors:r,isFetching:!1})}),u),{ids:[],entities:{},name:null,verboseName:null,currentEntity:null,rowsPerPage:10,totalCount:0,currentPage:1,errors:null,isFetching:!1})},165:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectResourceIsFetching=t.selectResourceErrors=t.selectResourceCurrentPage=t.selectResourceTotalCount=t.selectResourceRowsPerPage=t.selectResourceCurrentEntity=t.selectResourceVerboseName=t.selectResourceName=t.selectResourceEntities=t.selectResourceIds=t.selectResource=void 0;var u=r(286),a=r(400),n=function(e){return e&&e.__esModule?e:{default:e}}(r(417));var s=t.selectResource=function(e){return e.resource};t.selectResourceIds=(0,a.createSelector)(s,function(e){return e.ids}),t.selectResourceEntities=(0,a.createSelector)(s,function(e){return(0,u.denormalize)(e.ids,n.default.resourceCollection,e.entities)}),t.selectResourceName=(0,a.createSelector)(s,function(e){return e.name}),t.selectResourceVerboseName=(0,a.createSelector)(s,function(e){return e.verboseName}),t.selectResourceCurrentEntity=(0,a.createSelector)(s,function(e){return(0,u.denormalize)(e.currentEntity,n.default.resource,e.entities)}),t.selectResourceRowsPerPage=(0,a.createSelector)(s,function(e){return e.rowsPerPage}),t.selectResourceTotalCount=(0,a.createSelector)(s,function(e){return e.totalCount}),t.selectResourceCurrentPage=(0,a.createSelector)(s,function(e){return e.currentPage}),t.selectResourceErrors=(0,a.createSelector)(s,function(e){return e.errors}),t.selectResourceIsFetching=(0,a.createSelector)(s,function(e){return e.isFetching})},214:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchMetadataFailure=t.fetchMetadataSuccess=t.fetchMetadataRequest=t.FETCH_METADATA_FAILURE=t.FETCH_METADATA_SUCCESS=t.FETCH_METADATA_REQUEST=void 0;var u,a=l(r(141)),n=l(r(71)),s=r(448);function l(e){return e&&e.__esModule?e:{default:e}}var c=t.FETCH_METADATA_REQUEST="metadata/fetch/REQUEST",o=t.FETCH_METADATA_SUCCESS="metadata/fetch/SUCCESS",i=t.FETCH_METADATA_FAILURE="metadata/fetch/FAILURE";t.fetchMetadataRequest=(0,s.createAction)(c),t.fetchMetadataSuccess=(0,s.createAction)(o),t.fetchMetadataFailure=(0,s.createAction)(i);t.default=(0,s.handleActions)((u={},(0,a.default)(u,o,function(e,t){var r=t.payload;return(0,n.default)({},e,r)}),(0,a.default)(u,i,function(e,t){var r=t.payload;return(0,n.default)({},e,{error:r})}),u),{resources:null,schema:null,client:null,admin:null})},417:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=r(286);t.default={resource:new u.schema.Entity("resource"),resourceCollection:new u.schema.Array(new u.schema.Entity("resource"))}},435:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=l(r(52)),a=l(r(53)),n=l(r(882)),s=l(r(888));function l(e){return e&&e.__esModule?e:{default:e}}var c="/_crud/metadata/",o=function(){function e(){(0,u.default)(this,e)}return(0,a.default)(e,null,[{key:"getOperation",value:function(e,t,r){var u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3]?"/"+t+"/":"/"+t+"/{element_id}/",a=e.spec.paths[u][r].operationId;return e.apis[t][a]}},{key:"fetchMetadata",value:function(){return n.default.get(c).then(function(e){return e.body})}},{key:"fetchResourceCollection",value:function(t,r){var u=t.resourceName,a=t.query;return e.getOperation(r,u,"get")(a).then(function(e){return e.body})}},{key:"fetchResourceElement",value:function(t,r){var u=t.resourceName,a=t.resourceId;return e.getOperation(r,u,"get",!1)({element_id:a}).then(function(e){return e.body})}},{key:"fetchSwaggerSchema",value:function(e){return(0,s.default)(e).then(function(e){return e})}},{key:"submitResource",value:function(t,r){var u=t.resourceName,a=t.resourceData;return e.getOperation(r,u,"post")({},{requestBody:a}).then(function(e){return e.body})}},{key:"updateResourceElement",value:function(t,r){var u=t.resourceName,a=t.resourceId,n=t.resourceData;return e.getOperation(r,u,"put",!1)({element_id:a},{requestBody:n}).then(function(e){return e.body})}},{key:"deleteResourceElement",value:function(t,r){var u=t.resourceName,a=t.resourceId;return e.getOperation(r,u,"delete",!1)({element_id:a}).then(function(e){return e.body})}}]),e}();t.default=o},478:function(e,t,r){"use strict";var u=m(r(0)),a=m(r(119)),n=r(72),s=r(220),l=m(r(494)),c=r(226),o=m(r(449)),i=m(r(506)),d=m(r(512));r(872),r(875);var f=m(r(877)),p=m(r(878));function m(e){return e&&e.__esModule?e:{default:e}}var E=(0,l.default)(),h=(0,o.default)(),v=s.compose,R=(0,s.createStore)((0,c.connectRouter)(E)(f.default),v((0,s.applyMiddleware)((0,c.routerMiddleware)(E),h)));h.run(p.default),(0,i.default)(),a.default.render(u.default.createElement(n.Provider,{store:R},u.default.createElement(d.default,{history:E})),document.getElementById("root"))},512:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=R(r(58)),a=R(r(52)),n=R(r(53)),s=R(r(61)),l=R(r(62)),c=r(0),o=R(c),i=r(72),d=R(r(14)),f=r(55),p=r(226);r(723);var m=R(r(725)),E=R(r(829)),h=r(214),v=r(83);function R(e){return e&&e.__esModule?e:{default:e}}var _={fetchMetadata:d.default.func.isRequired,history:d.default.object.isRequired,url:d.default.string},y=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,n.default)(t,[{key:"componentDidMount",value:function(){this.props.fetchMetadata()}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.history;return o.default.createElement(p.ConnectedRouter,{history:r},o.default.createElement("div",{className:"App"},o.default.createElement(E.default,null),o.default.createElement(f.Container,{style:{marginTop:"80px"}},o.default.createElement(m.default,{url:t}))))}}]),t}(c.Component);y.propTypes=_;var S={fetchMetadata:h.fetchMetadataRequest};t.default=(0,i.connect)(function(e){return{url:(0,v.selectMetadataAdmin)(e)}},S)(y)},725:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(r(726));t.default=u.default},726:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=v(r(58)),a=v(r(52)),n=v(r(53)),s=v(r(61)),l=v(r(62)),c=r(0),o=v(c),i=v(r(14)),d=r(147),f=v(r(729)),p=v(r(738)),m=v(r(821)),E=v(r(827)),h=v(r(828));function v(e){return e&&e.__esModule?e:{default:e}}var R={url:i.default.string},_=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props.url;return e?o.default.createElement(d.Switch,null,o.default.createElement(d.Route,{exact:!0,path:e,component:f.default}),o.default.createElement(d.Route,{exact:!0,path:e+":resource/",component:p.default}),o.default.createElement(d.Route,{exact:!0,path:e+":resource/:id/",component:m.default}),o.default.createElement(d.Route,{path:"/404/",component:h.default}),o.default.createElement(d.Route,{path:"/500/",component:E.default})):null}}]),t}(c.Component);t.default=_,_.propTypes=R},729:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=h(r(116)),a=h(r(140)),n=h(r(58)),s=h(r(52)),l=h(r(53)),c=h(r(61)),o=h(r(62)),i=h(r(14)),d=h(r(0)),f=r(72),p=r(147),m=r(55),E=r(83);function h(e){return e&&e.__esModule?e:{default:e}}var v={url:i.default.string,resources:i.default.object},R=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.resources;return e&&d.default.createElement("div",null,d.default.createElement(m.Menu,{vertical:!0,fluid:!0},d.default.createElement(m.Menu.Item,{color:"red",header:!0},"Resources"),(0,a.default)(e).map(function(e){var t=(0,u.default)(e,2),r=t[0],a=t[1];return d.default.createElement(m.Menu.Item,{key:r,as:p.Link,to:r+"/",name:r},a.verbose_name)})))}}]),t}(d.default.Component);R.propTypes=v,R.defaultProps={resources:null};t.default=(0,f.connect)(function(e){return{resources:(0,E.selectMetadataResources)(e),url:(0,E.selectMetadataAdmin)(e)}})(R)},738:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=g(r(117)),a=g(r(116)),n=g(r(140)),s=g(r(141)),l=g(r(142)),c=g(r(71)),o=g(r(58)),i=g(r(52)),d=g(r(53)),f=g(r(61)),p=g(r(62)),m=r(405),E=g(r(14)),h=g(r(0)),v=r(72),R=r(147),_=r(55),y=r(143),S=r(83),C=r(165),b=g(r(787)),M=g(r(789));function g(e){return e&&e.__esModule?e:{default:e}}var T=["page","page_size"],k={match:E.default.object,schema:E.default.object,resources:E.default.object,url:E.default.string,fetchResources:E.default.func.isRequired,rowsPerPage:E.default.number,currentPage:E.default.number,isFetching:E.default.bool},P=function(e){function t(e){(0,i.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return r.handleChange=r.handleChange.bind(r),r.handleSelect=r.handleSelect.bind(r),r.state={filter:null,value:null,columnsOpen:!1,columns:null},r}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,r=e.rowsPerPage;this.props.fetchResources({resourceName:this.resourceName,query:{page_size:r,page:t}})}},{key:"componentDidUpdate",value:function(e){if(null!==this.props.schema&&(null===e.schema||null===this.state.columns)){var t=this.props.resources;this.setState((0,c.default)({},this.state,{columns:[].concat((0,l.default)(t[this.resourceName].columns))}))}}},{key:"handleChange",value:function(e,t){var r=this,u=t.name,a=t.value;this.setState((0,c.default)({},this.state,(0,s.default)({},u,a)),function(){var e=r.state,t=e.filter,u=e.value,a=r.props,n=a.currentPage,l=a.rowsPerPage;null!==t&&null!==u&&r.props.fetchResources({resourceName:r.resourceName,query:(0,s.default)({page_size:l,page:n},t,u)})})}},{key:"handleSelect",value:function(e,t){var r=t.value,u=this.state.columns;(u=u||[]).includes(r)?u=u.filter(function(e){return e!==r}):u.push(r),this.setState((0,c.default)({},this.state,{columns:[].concat((0,l.default)(u))}))}},{key:"renderMenuFilter",value:function(){var e=this.filterParameters.map(function(e){return{key:e.name,text:e.name,value:e.name}});return e.length>0?h.default.createElement(_.Menu.Item,null,h.default.createElement(_.Input,{name:"value",onChange:this.handleChange,icon:"filter",iconPosition:"left",placeholder:"Filter...",action:h.default.createElement(_.Dropdown,{onChange:this.handleChange,name:"filter",placeholder:"Filter",compact:!0,selection:!0,search:!0,options:e})})):null}},{key:"renderMenuColumns",value:function(){var e=this,t=(0,n.default)(this.fields).map(function(e){var t=(0,a.default)(e,2),r=t[0],u=t[1];return{key:r,text:u.description||u.title||r,value:r}});return h.default.createElement(_.Dropdown,{item:!0,name:"columns",text:"Columns",open:this.state.columnsOpen,onClick:function(t){t.preventDefault(),e.setState((0,c.default)({},e.state,{columnsOpen:!e.state.columnsOpen}))},onBlur:function(t){t.preventDefault(),e.setState((0,c.default)({},e.state,{columnsOpen:!1}))}},h.default.createElement(_.Dropdown.Menu,null,h.default.createElement(_.Dropdown.Header,{icon:"columns",content:"Columns"}),h.default.createElement(_.Dropdown.Menu,{scrolling:!0},t.map(function(t){return h.default.createElement(_.Dropdown.Item,(0,c.default)({selected:t.value in e.columns,onClick:e.handleSelect,key:t.value},t))}))))}},{key:"renderMenu",value:function(){var e=this.props.url;return h.default.createElement(_.Menu,{size:"large",attached:"top"},h.default.createElement(_.Menu.Item,{header:!0},this.verboseName),h.default.createElement(_.Menu.Menu,{position:"right"},this.renderMenuFilter(),this.renderMenuColumns(),h.default.createElement(_.Menu.Item,null,h.default.createElement(_.Button,{primary:!0,as:R.Link,to:""+e+this.resourceName+"/new/"},"Create"))))}},{key:"render",value:function(){var e=this.props,t=e.isFetching,r=e.schema;return h.default.createElement(h.default.Fragment,null,r&&this.renderMenu(),t?h.default.createElement(b.default,{attached:!0}):h.default.createElement(M.default,{resourceName:this.resourceName,columns:this.columns}))}},{key:"resourceName",get:function(){return this.props.match.params.resource}},{key:"verboseName",get:function(){return this.props.resources[this.resourceName].verbose_name}},{key:"filterParameters",get:function(){return this.props.schema.spec.paths["/"+this.resourceName+"/"].get.parameters.filter(function(e){return"query"===e.in&&!T.includes(e.name)})}},{key:"resourceSchema",get:function(){var e=this.props.schema;return e&&e.spec.paths["/"+this.resourceName+"/"].get}},{key:"fields",get:function(){var e=(0,n.default)(this.resourceSchema.responses[200].content["application/json"].schema.items.properties);return u.default.apply(Object,(0,l.default)((0,m.orderBy)(e.filter(function(e){var t=(0,a.default)(e,2),r=t[0];t[1];return"id"!==r}),["description"],["asc"]).map(function(e){var t=(0,a.default)(e,2),r=t[0],u=t[1];return(0,s.default)({},r,u)})))}},{key:"columns",get:function(){var e=this.state.columns;return e=e||[],u.default.apply(Object,(0,l.default)((0,n.default)(this.fields).map(function(t){var r=(0,a.default)(t,2),u=r[0],n=r[1];return e.includes(u)?(0,s.default)({},u,n):{}})))}}]),t}(h.default.Component);P.propTypes=k;var U={fetchResources:y.fetchResourceEntitiesRequest};t.default=(0,v.connect)(function(e){return{schema:(0,S.selectMetadataClient)(e),resources:(0,S.selectMetadataResources)(e),url:(0,S.selectMetadataAdmin)(e),rowsPerPage:(0,C.selectResourceRowsPerPage)(e),currentPage:(0,C.selectResourceCurrentPage)(e),isFetching:(0,C.selectResourceIsFetching)(e)}},U)(P)},787:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(r(788));t.default=u.default},788:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=d(r(71)),a=d(r(58)),n=d(r(52)),s=d(r(53)),l=d(r(61)),c=d(r(62)),o=d(r(0)),i=r(55);function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,n.default)(this,t),(0,l.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return o.default.createElement(i.Segment,(0,u.default)({style:{minHeight:"200px"}},this.props),o.default.createElement(i.Dimmer,{active:!0,inverted:!0},o.default.createElement(i.Loader,{inverted:!0},"Loading")))}}]),t}(o.default.PureComponent);t.default=f},789:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(r(790));t.default=u.default},790:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=S(r(288)),a=S(r(116)),n=S(r(140)),s=S(r(58)),l=S(r(52)),c=S(r(53)),o=S(r(61)),i=S(r(62)),d=r(405),f=r(289),p=S(r(14)),m=S(r(0)),E=r(72),h=r(147),v=r(55),R=r(143),_=r(83),y=r(165);function S(e){return e&&e.__esModule?e:{default:e}}var C={columns:p.default.object.isRequired,url:p.default.string,resourceName:p.default.string.isRequired,fetchResources:p.default.func.isRequired,resources:p.default.arrayOf(p.default.object),rowsPerPage:p.default.number,currentPage:p.default.number,totalCount:p.default.number},b=function(e){function t(e){(0,l.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.handlePageChange=r.handlePageChange.bind(r),r}return(0,i.default)(t,e),(0,c.default)(t,[{key:"handlePageChange",value:function(e,t){var r=t.activePage;if(e&&r!==this.props.currentPage&&r>0&&r<this.props.totalCount/this.props.rowsPerPage){var u=this.props,a=u.resourceName,n=u.rowsPerPage;this.props.fetchResources({resourceName:a,query:{page:r,page_size:n}})}}},{key:"renderEmpty",value:function(){return m.default.createElement(v.Segment,{attached:!0},"No results found.")}},{key:"renderResources",value:function(){var e=this.props,t=e.columns,r=e.currentPage,s=e.totalCount,l=e.rowsPerPage,c=e.resourceName,o=e.resources,i=e.url,f=(0,d.orderBy)(o,["id"],["desc"]);return m.default.createElement(v.Table,{attached:!0,compact:"very",striped:!0,singleLine:!0},m.default.createElement(v.Table.Header,null,m.default.createElement(v.Table.Row,null,m.default.createElement(v.Table.HeaderCell,null,"ID"),(0,n.default)(t).map(function(e){var t=(0,a.default)(e,2),r=t[0],u=t[1];return m.default.createElement(v.Table.HeaderCell,{key:r},u.description||u.title||r)}))),m.default.createElement(v.Table.Body,null,f.map(function(e){return m.default.createElement(v.Table.Row,{key:e.id},m.default.createElement(v.Table.Cell,null,m.default.createElement(h.Link,{to:""+i+c+"/"+e.id+"/"},e.id)),(0,u.default)(t).map(function(t){return m.default.createElement(v.Table.Cell,{key:t},e[t])}))})),m.default.createElement(v.Table.Footer,null,m.default.createElement(v.Table.Row,null,m.default.createElement(v.Table.HeaderCell,{colSpan:(0,u.default)(t).length+1,textAlign:"center"},m.default.createElement(v.Pagination,{activePage:r,totalPages:s/l,onPageChange:this.handlePageChange})))))}},{key:"render",value:function(){return this.isEmpty?this.renderEmpty():this.renderResources()}},{key:"isEmpty",get:function(){var e=this.props.resources;return(0,f.isEmpty)(e)}}]),t}(m.default.Component);b.propTypes=C;var M={fetchResources:R.fetchResourceEntitiesRequest};t.default=(0,E.connect)(function(e){return{url:(0,_.selectMetadataAdmin)(e),rowsPerPage:(0,y.selectResourceRowsPerPage)(e),currentPage:(0,y.selectResourceCurrentPage)(e),totalCount:(0,y.selectResourceTotalCount)(e),resources:(0,y.selectResourceEntities)(e)}},M)(b)},821:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=h(r(71)),a=h(r(58)),n=h(r(52)),s=h(r(53)),l=h(r(61)),c=h(r(62)),o=h(r(14)),i=h(r(0)),d=r(72),f=r(55),p=r(143),m=r(83),E=h(r(822));function h(e){return e&&e.__esModule?e:{default:e}}var v={match:o.default.object,resources:o.default.object,deleteResourceElement:o.default.func},R=function(e){function t(e){(0,n.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r.showDelete=r.showDelete.bind(r),r.handleDeleteConfirm=r.handleDeleteConfirm.bind(r),r.handleDeleteCancel=r.handleDeleteCancel.bind(r),r.state={isDeleteOpen:!1},r}return(0,c.default)(t,e),(0,s.default)(t,[{key:"showDelete",value:function(){this.setState((0,u.default)({},this.state,{isDeleteOpen:!0}))}},{key:"handleDeleteConfirm",value:function(){var e=this.props,t=e.deleteResourceElement,r=e.match.params;t({resourceName:r.resource,resourceId:r.id}),this.setState((0,u.default)({},this.state,{isDeleteOpen:!1}))}},{key:"handleDeleteCancel",value:function(){this.setState((0,u.default)({},this.state,{isDeleteOpen:!1}))}},{key:"render",value:function(){var e=this.state.isDeleteOpen,t=this.props.match.params,r=t.resource,u=t.id,a="new"===u?null:u;return i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Menu,{attached:"top"},i.default.createElement(f.Menu.Item,{header:!0},this.verboseName),a&&i.default.createElement(f.Menu.Item,null,a),a&&i.default.createElement(f.Menu.Menu,{position:"right"},i.default.createElement(f.Menu.Item,null,i.default.createElement(f.Button,{name:"delete",onClick:this.showDelete,onKeyPress:this.showDelete,negative:!0},i.default.createElement(f.Icon,{name:"delete"}),"Delete")))),i.default.createElement(f.Segment,{attached:!0},i.default.createElement(E.default,{resourceName:r,resourceId:a,attached:!0})),a&&i.default.createElement(f.Confirm,{open:e,header:"Delete "+this.verboseName,content:"Are you sure you want to delete "+this.verboseName+" ("+a+")?",onCancel:this.handleDeleteCancel,onConfirm:this.handleDeleteConfirm}))}},{key:"verboseName",get:function(){var e=this.props;return e.resources[e.match.params.resource].verbose_name}}]),t}(i.default.Component);R.propTypes=v;var _={deleteResourceElement:p.deleteResourceElementRequest};t.default=(0,d.connect)(function(e){return{resources:(0,m.selectMetadataResources)(e)}},_)(R)},822:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=b(r(71)),a=b(r(141)),n=b(r(117)),s=b(r(142)),l=b(r(116)),c=b(r(140)),o=b(r(288)),i=b(r(58)),d=b(r(52)),f=b(r(53)),p=b(r(61)),m=b(r(62)),E=b(r(14)),h=b(r(0)),v=r(72),R=r(55),_=r(143),y=r(83),S=r(165),C=b(r(823));function b(e){return e&&e.__esModule?e:{default:e}}var M={schema:E.default.object,fetchResource:E.default.func,updateResourceElement:E.default.func,submitResource:E.default.func,verboseName:E.default.string,currentEntity:E.default.object,resourceId:E.default.string,resourceName:E.default.string.isRequired},g=function(e){function t(e){(0,d.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.getValue=r.getValue.bind(r),r.handleChange=r.handleChange.bind(r),r.handleSubmit=r.handleSubmit.bind(r),r.state={},r}return(0,m.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.resourceId,r=e.resourceName;t&&this.props.fetchResource({resourceName:r,resourceId:t})}},{key:"componentDidUpdate",value:function(e){if(null===e.currentEntity&&null!==this.props.currentEntity){var t=this.props.currentEntity,r=(0,o.default)(this.writableFields),i=(0,c.default)(t).filter(function(e){var t=(0,l.default)(e,2),u=t[0];t[1];return r.includes(u)});i=n.default.apply(Object,(0,s.default)(i.map(function(e){var t=(0,l.default)(e,2),r=t[0],u=t[1];return(0,a.default)({},r,u)}))),this.setState((0,u.default)({},this.state,i))}}},{key:"getValue",value:function(e){var t=this.props.currentEntity,r=null;return e in this.state?r=this.state[e]:t&&(r=t[e]),r||""}},{key:"handleChange",value:function(e,t){var r=t.name,n=t.value;this.setState((0,u.default)({},this.state,(0,a.default)({},r,n)))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,r=t.resourceId,u=t.resourceName,a=t.updateResourceElement,n=t.submitResource;r?a({resourceName:u,resourceId:r,resourceData:this.state}):n({resourceName:u,resourceData:this.state})}},{key:"render",value:function(){var e=this,t=null===this.props.resourceId?this.writableFields:this.fields;return h.default.createElement(R.Form,{onSubmit:this.handleSubmit},(0,c.default)(t).map(function(t){var r=(0,l.default)(t,2),u=r[0],a=r[1];return h.default.createElement(C.default,{key:u,name:u,type:a.type,format:a.format,label:a.description||a.title||u,placeholder:a.default,value:e.getValue(u),required:!a.readOnly&&a.required,readOnly:a.readOnly,onChange:e.handleChange})}),h.default.createElement(R.Form.Button,{content:"Save",positive:!0}))}},{key:"resourceSchema",get:function(){var e=this.props,t=e.resourceName,r=e.schema;return r&&r.spec.paths["/"+t+"/"]}},{key:"fields",get:function(){var e=this.resourceSchema.get.responses[200].content["application/json"].schema.items,t=e.properties,r=e.required,u=this.resourceSchema.post.requestBody.content["application/json"].schema,o=u.properties,i=u.required,d=(0,c.default)(t).map(function(e){var t=(0,l.default)(e,2),u=t[0],a=t[1];return a.readOnly=!0,a.required=r.includes(u),[u,a]}),f=(0,c.default)(o).map(function(e){var t=(0,l.default)(e,2),r=t[0],u=t[1];return u.readOnly=!1,u.required=i.includes(r),[r,u]});return n.default.apply(Object,(0,s.default)(d.map(function(e){var t=(0,l.default)(e,2),r=t[0],u=t[1];return(0,a.default)({},r,u)})).concat((0,s.default)(f.map(function(e){var t=(0,l.default)(e,2),r=t[0],u=t[1];return(0,a.default)({},r,u)}))))}},{key:"readOnlyFields",get:function(){var e=(0,c.default)(this.fields).filter(function(e){var t=(0,l.default)(e,2);t[0];return t[1].readOnly});return n.default.apply(Object,(0,s.default)(e.map(function(e){var t=(0,l.default)(e,2),r=t[0],u=t[1];return(0,a.default)({},r,u)})))}},{key:"writableFields",get:function(){var e=(0,c.default)(this.fields).filter(function(e){var t=(0,l.default)(e,2);t[0];return!t[1].readOnly});return n.default.apply(Object,(0,s.default)(e.map(function(e){var t=(0,l.default)(e,2),r=t[0],u=t[1];return(0,a.default)({},r,u)})))}}]),t}(h.default.Component);g.propTypes=M,g.defaultProps={};var T={fetchResource:_.fetchCurrentResourceRequest,submitResource:_.submitResourceRequest,updateResourceElement:_.updateResourceElementRequest};t.default=(0,v.connect)(function(e){return{schema:(0,y.selectMetadataClient)(e),verboseName:(0,S.selectResourceVerboseName)(e),currentEntity:(0,S.selectResourceCurrentEntity)(e),errors:(0,S.selectResourceErrors)(e)}},T)(g)},823:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=v(r(71)),a=v(r(421)),n=v(r(58)),s=v(r(52)),l=v(r(53)),c=v(r(61)),o=v(r(62)),i=v(r(141)),d=v(r(117)),f=v(r(142)),p=v(r(824)),m=v(r(14)),E=v(r(0)),h=r(55);function v(e){return e&&e.__esModule?e:{default:e}}var R=(0,p.default)(d.default.apply(Object,(0,f.default)(["string","integer","boolean","float","time","date","datetime","unknown"].map(function(e){return(0,i.default)({},e,e)})))),_={type:m.default.string.isRequired,format:m.default.string},y=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"renderInput",value:function(e){var t=this.props,r=(t.type,t.format,(0,a.default)(t,["type","format"]));return E.default.createElement(h.Form.Field,(0,u.default)({control:h.Input},e,r))}},{key:"renderTimePicker",value:function(){var e=this.props,t=(e.type,e.format,e.placeholder,(0,a.default)(e,["type","format","placeholder"]));return E.default.createElement(h.Form.Field,(0,u.default)({control:h.Input,placeholder:"HH:MM:SS"},t))}},{key:"renderDatePicker",value:function(){var e=this.props,t=(e.type,e.format,e.placeholder,(0,a.default)(e,["type","format","placeholder"]));return E.default.createElement(h.Form.Field,(0,u.default)({control:h.Input,placeholder:"YYYY/MM/DD"},t))}},{key:"renderDateTimePicker",value:function(){var e=this.props,t=(e.type,e.format,e.placeholder,(0,a.default)(e,["type","format","placeholder"]));return E.default.createElement(h.Form.Field,(0,u.default)({control:h.Input,placeholder:"YYYY/MM/DD HH:MM:SS"},t))}},{key:"renderCheckbox",value:function(){var e=this.props,t=(e.type,e.format,e.placeholder,e.value),r=(0,a.default)(e,["type","format","placeholder","value"]);return E.default.createElement(h.Form.Checkbox,(0,u.default)({checked:!0===t},r))}},{key:"renderTextArea",value:function(){var e=this.props,t=(e.type,e.format,(0,a.default)(e,["type","format"]));return E.default.createElement(h.Form.TextArea,t)}},{key:"render",value:function(){var e=this.props,r=e.type,u=e.format;switch(t.getType(r,u)){case R.integer:return this.renderInput({type:"number",step:1});case R.float:return this.renderInput({type:"number",step:"any"});case R.string:return this.renderInput();case R.time:return this.renderTimePicker();case R.date:return this.renderDatePicker();case R.datetime:return this.renderDateTimePicker();case R.boolean:return this.renderCheckbox();default:return this.renderTextArea()}}}],[{key:"getType",value:function(e,t){switch(e){case"integer":return R.integer;case"number":return R.float;case"string":switch(t){case"time":return R.time;case"date":return R.date;case"datetime":return R.datetime;default:return R.string}case"boolean":return R.boolean;default:return R.unknown}}}]),t}(E.default.PureComponent);y.propTypes=_,y.defaultProps={format:null},t.default=y},827:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=r(55);var n=function(e){return u.default.createElement(a.Message,{header:"Internal Server Error"})};n.propTypes={},n.defaultProps={},t.default=n},828:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=r(55);var n=function(e){return u.default.createElement(a.Message,{header:"Not Found"})};n.propTypes={},n.defaultProps={},t.default=n},829:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(r(830));t.default=u.default},83:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectMetadataResources=t.selectMetadataClient=t.selectMetadataSchema=t.selectMetadataAdmin=t.selectMetadata=void 0;var u=r(400),a=t.selectMetadata=function(e){return e.metadata};t.selectMetadataAdmin=(0,u.createSelector)(a,function(e){return e.admin}),t.selectMetadataSchema=(0,u.createSelector)(a,function(e){return e.schema}),t.selectMetadataClient=(0,u.createSelector)(a,function(e){return e.client}),t.selectMetadataResources=(0,u.createSelector)(a,function(e){return e.resources})},830:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=v(r(58)),a=v(r(52)),n=v(r(53)),s=v(r(61)),l=v(r(62)),c=r(289),o=v(r(14)),i=v(r(0)),d=r(72),f=r(147),p=r(55),m=r(83),E=r(165),h=v(r(831));function v(e){return e&&e.__esModule?e:{default:e}}var R={url:o.default.string,schema:o.default.object,resourceName:o.default.string,currentEntity:o.default.object},_=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props,t=e.schema,r=e.resourceName,u=e.currentEntity,a=e.url,n=t&&t.spec.info.title||"API Star CRUD";return i.default.createElement(p.Menu,{fixed:"top",inverted:!0},i.default.createElement(p.Menu.Item,{as:"a",href:"/",header:!0},n),i.default.createElement(p.Menu.Item,{as:f.Link,to:""+a},"Admin"),r&&i.default.createElement(h.default,null),!(0,c.isEmpty)(u)&&i.default.createElement(p.Menu.Item,{as:"a"},u.id))}}]),t}(i.default.Component);_.propTypes=R,_.defaultProps={};t.default=(0,d.connect)(function(e){return{url:(0,m.selectMetadataAdmin)(e),schema:(0,m.selectMetadataClient)(e),resourceName:(0,E.selectResourceName)(e),currentEntity:(0,E.selectResourceCurrentEntity)(e)}})(_)},831:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(r(832));t.default=u.default},832:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=y(r(117)),a=y(r(142)),n=y(r(116)),s=y(r(140)),l=y(r(58)),c=y(r(52)),o=y(r(53)),i=y(r(61)),d=y(r(62)),f=r(289),p=(r(833),y(r(14))),m=y(r(0)),E=r(72),h=r(147),v=r(55),R=r(83),_=r(165);function y(e){return e&&e.__esModule?e:{default:e}}var S={url:p.default.string,resources:p.default.object,resourceName:p.default.string,verboseName:p.default.string},C=function(e){function t(e){(0,c.default)(this,t);var r=(0,i.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.state={resourceFilter:""},r.renderResources=r.renderResources.bind(r),r}return(0,d.default)(t,e),(0,o.default)(t,[{key:"renderResources",value:function(){var e=this.props.url;return(0,s.default)(this.filteredResources).map(function(t){var r=(0,n.default)(t,2),u=r[0],a=r[1];return m.default.createElement(v.Dropdown.Item,{key:u,as:h.Link,to:""+e+u+"/"},a.verbose_name)})}},{key:"renderNoResults",value:function(){return m.default.createElement(v.Dropdown.Item,{disabled:!0},"No resources found")}},{key:"render",value:function(){var e=this,t=this.props.verboseName;return m.default.createElement(v.Dropdown,{item:!0,text:t},m.default.createElement(v.Dropdown.Menu,null,m.default.createElement(v.Input,{onChange:function(t){return e.setState({resourceFilter:t.target.value})},icon:"search",iconPosition:"left",placeholder:"Resource"}),m.default.createElement(v.Dropdown.Divider,null),(0,f.isEmpty)(this.filteredResources)?this.renderNoResults():this.renderResources()))}},{key:"filteredResources",get:function(){var e=this.props.resources,t=this.state.resourceFilter;return u.default.apply(Object,(0,a.default)((0,s.default)(e).filter(function(e){var r=(0,n.default)(e,2);r[0];return r[1].verbose_name.toLowerCase().includes(t.toLowerCase())})))}}]),t}(m.default.Component);C.propTypes=S,C.defaultProps={};t.default=(0,E.connect)(function(e){return{url:(0,R.selectMetadataAdmin)(e),resources:(0,R.selectMetadataResources)(e),resourceName:(0,_.selectResourceName)(e),verboseName:(0,_.selectResourceVerboseName)(e)}})(C)},877:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=r(220),a=s(r(214)),n=s(r(143));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,u.combineReducers)({metadata:a.default,resource:n.default})},878:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=l(r(215));t.default=o;var a=r(151),n=l(r(881)),s=l(r(951));function l(e){return e&&e.__esModule?e:{default:e}}var c=u.default.mark(o);function o(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.all)([(0,n.default)(),(0,s.default)()]);case 2:case"end":return e.stop()}},c,this)}},881:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=c(r(215)),a=c(r(71));t.default=f;var n=r(151),s=r(214),l=c(r(435));function c(e){return e&&e.__esModule?e:{default:e}}var o=u.default.mark(d),i=u.default.mark(f);function d(){var e,t;return u.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,n.call)(l.default.fetchMetadata);case 2:return e=r.sent,r.next=5,(0,n.call)(l.default.fetchSwaggerSchema,e.schema);case 5:return t=r.sent,r.next=8,(0,n.put)((0,s.fetchMetadataSuccess)((0,a.default)({},e,{client:t})));case 8:case"end":return r.stop()}},o,this)}function f(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.takeLatest)(s.FETCH_METADATA_REQUEST,d);case 2:case"end":return e.stop()}},i,this)}},951:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=m(r(215)),a=m(r(71));t.default=P;var n=r(226),s=r(286),l=r(449),c=r(151),o=m(r(435)),i=r(214),d=r(143),f=m(r(417)),p=r(83);function m(e){return e&&e.__esModule?e:{default:e}}var E=u.default.mark(C),h=u.default.mark(b),v=u.default.mark(M),R=u.default.mark(g),_=u.default.mark(T),y=u.default.mark(k),S=u.default.mark(P);function C(){var e,t,r;return u.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,c.select)(p.selectMetadataClient);case 2:if(e=u.sent){u.next=13;break}return u.next=6,(0,c.call)(o.default.fetchMetadata);case 6:return t=u.sent,r=t.schema,u.next=10,(0,c.call)(o.default.fetchSwaggerSchema,r);case 10:return e=u.sent,u.next=13,(0,c.put)((0,i.fetchMetadataSuccess)((0,a.default)({},t,{client:e})));case 13:return u.abrupt("return",e);case 14:case"end":return u.stop()}},E,this)}function b(e){var t,r,a,i,m,E,v=e.payload;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.call)(l.delay,500);case 3:return e.next=5,(0,c.call)(C);case 5:return t=e.sent,e.next=8,(0,c.call)(o.default.fetchResourceCollection,v,t);case 8:return r=e.sent,a=(0,s.normalize)(r,{data:f.default.resourceCollection}),e.next=12,(0,c.select)(p.selectMetadataResources);case 12:return i=e.sent,m=v.resourceName,E=i[m].verbose_name,e.next=17,(0,c.put)((0,d.fetchResourceEntitiesSuccess)({ids:a.result.data,entities:a.entities,name:m,verboseName:E,rowsPerPage:a.result.meta.page_size,currentPage:a.result.meta.page,totalCount:a.result.meta.count}));case 17:e.next=37;break;case 19:return e.prev=19,e.t0=e.catch(0),e.next=23,(0,c.put)((0,d.fetchResourceEntitiesFailure)(e.t0.message));case 23:if(!("status"in e.t0)){e.next=34;break}if(404!==e.t0.status){e.next=29;break}return e.next=27,(0,c.put)((0,n.push)("/404"));case 27:e.next=32;break;case 29:if(!(e.t0.status>=500)){e.next=32;break}return e.next=32,(0,c.put)((0,n.push)("/500"));case 32:e.next=37;break;case 34:return console.error(e.t0),e.next=37,(0,c.put)((0,n.push)("/404"));case 37:case"end":return e.stop()}},h,this,[[0,19]])}function M(e){var t,r,a,l,i=e.payload;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:return t=e.sent,e.next=6,(0,c.call)(o.default.submitResource,i,t);case 6:return r=e.sent,a=(0,s.normalize)(r,f.default.resource),e.next=10,(0,c.put)((0,d.submitResourceSuccess)({currentEntity:a.result,entities:a.entities}));case 10:return e.next=12,(0,c.select)(p.selectMetadataAdmin);case 12:return l=e.sent,e.next=15,(0,c.put)((0,n.push)(""+l+i.resourceName+"/"));case 15:e.next=30;break;case 17:return e.prev=17,e.t0=e.catch(0),e.next=21,(0,c.put)((0,d.submitResourceFailure)(e.t0));case 21:if(!("status"in e.t0)){e.next=30;break}if(404!==e.t0.status){e.next=27;break}return e.next=25,(0,c.put)((0,n.push)("/404"));case 25:e.next=30;break;case 27:if(!(e.t0.status>=500)){e.next=30;break}return e.next=30,(0,c.put)((0,n.push)("/500"));case 30:case"end":return e.stop()}},v,this,[[0,17]])}function g(e){var t,r,a,l,i=e.payload;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.select)(p.selectMetadataClient);case 3:return t=e.sent,e.next=6,(0,c.call)(o.default.updateResourceElement,i,t);case 6:return r=e.sent,a=(0,s.normalize)(r,f.default.resource),e.next=10,(0,c.put)((0,d.fetchCurrentResourceSuccess)({currentEntity:a.result,entities:a.entities}));case 10:return e.next=12,(0,c.select)(p.selectMetadataAdmin);case 12:return l=e.sent,e.next=15,(0,c.put)((0,n.push)(""+l+i.resourceName+"/"));case 15:e.next=30;break;case 17:return e.prev=17,e.t0=e.catch(0),e.next=21,(0,c.put)((0,d.updateResourceElementFailure)(e.t0));case 21:if(!("status"in e.t0)){e.next=30;break}if(404!==e.t0.status){e.next=27;break}return e.next=25,(0,c.put)((0,n.push)("/404"));case 25:e.next=30;break;case 27:if(!(e.t0.status>=500)){e.next=30;break}return e.next=30,(0,c.put)((0,n.push)("/500"));case 30:case"end":return e.stop()}},R,this,[[0,17]])}function T(e){var t,r,a,l,i,m,E=e.payload;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:return t=e.sent,e.next=6,(0,c.call)(o.default.fetchResourceElement,E,t);case 6:return r=e.sent,a=(0,s.normalize)(r,f.default.resource),e.next=10,(0,c.select)(p.selectMetadataResources);case 10:return l=e.sent,i=E.resourceName,m=l[i].verbose_name,e.next=15,(0,c.put)((0,d.fetchCurrentResourceSuccess)({name:i,verboseName:m,currentEntity:a.result,entities:a.entities}));case 15:e.next=30;break;case 17:return e.prev=17,e.t0=e.catch(0),e.next=21,(0,c.put)((0,d.fetchCurrentResourceFailure)(e.t0));case 21:if(!("status"in e.t0)){e.next=30;break}if(404!==e.t0.status){e.next=27;break}return e.next=25,(0,c.put)((0,n.push)("/404"));case 25:e.next=30;break;case 27:if(!(e.t0.status>=500)){e.next=30;break}return e.next=30,(0,c.put)((0,n.push)("/500"));case 30:case"end":return e.stop()}},_,this,[[0,17]])}function k(e){var t,r,a=e.payload;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:return t=e.sent,e.next=6,(0,c.call)(o.default.deleteResourceElement,a,t);case 6:return e.sent,e.next=9,(0,c.put)((0,d.deleteResourceElementSuccess)(a));case 9:return e.next=11,(0,c.select)(p.selectMetadataAdmin);case 11:return r=e.sent,e.next=14,(0,c.put)((0,n.push)(""+r+a.resourceName+"/"));case 14:e.next=29;break;case 16:return e.prev=16,e.t0=e.catch(0),e.next=20,(0,c.put)((0,d.deleteResourceElementFailure)(e.t0));case 20:if(!("status"in e.t0)){e.next=29;break}if(404!==e.t0.status){e.next=26;break}return e.next=24,(0,c.put)((0,n.push)("/404"));case 24:e.next=29;break;case 26:if(!(e.t0.status>=500)){e.next=29;break}return e.next=29,(0,c.put)((0,n.push)("/500"));case 29:case"end":return e.stop()}},y,this,[[0,16]])}function P(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.takeLatest)(d.FETCH_RESOURCE_ENTITIES_REQUEST,b);case 2:return e.next=4,(0,c.takeLatest)(d.SUBMIT_RESOURCE_REQUEST,M);case 4:return e.next=6,(0,c.takeLatest)(d.FETCH_CURRENT_RESOURCE_REQUEST,T);case 6:return e.next=8,(0,c.takeLatest)(d.UPDATE_RESOURCE_ELEMENT_REQUEST,g);case 8:return e.next=10,(0,c.takeLatest)(d.DELETE_RESOURCE_ELEMENT_REQUEST,k);case 10:case"end":return e.stop()}},S,this)}}},[[478,3,1,2]]]);
//# sourceMappingURL=index.js.map