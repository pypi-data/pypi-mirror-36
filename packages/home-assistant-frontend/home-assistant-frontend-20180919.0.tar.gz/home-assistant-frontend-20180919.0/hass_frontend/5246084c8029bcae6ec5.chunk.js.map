{"version":3,"file":"5246084c8029bcae6ec5.chunk.js","sources":["webpack:///5246084c8029bcae6ec5.chunk.js"],"sourcesContent":["/*! For license information please see 5246084c8029bcae6ec5.chunk.js.LICENSE */\n(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{200:function(t,e,s){\"use strict\";s.d(e,\"b\",function(){return o}),s.d(e,\"a\",function(){return a}),s(2);var i=s(54),n=s(1);const o={hostAttributes:{role:\"dialog\",tabindex:\"-1\"},properties:{modal:{type:Boolean,value:!1},__readied:{type:Boolean,value:!1}},observers:[\"_modalChanged(modal, __readied)\"],listeners:{tap:\"_onDialogClick\"},ready:function(){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,this.__prevWithBackdrop=this.withBackdrop,this.__readied=!0},_modalChanged:function(t,e){e&&(t?(this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,this.__prevWithBackdrop=this.withBackdrop,this.noCancelOnOutsideClick=!0,this.noCancelOnEscKey=!0,this.withBackdrop=!0):(this.noCancelOnOutsideClick=this.noCancelOnOutsideClick&&this.__prevNoCancelOnOutsideClick,this.noCancelOnEscKey=this.noCancelOnEscKey&&this.__prevNoCancelOnEscKey,this.withBackdrop=this.withBackdrop&&this.__prevWithBackdrop))},_updateClosingReasonConfirmed:function(t){this.closingReason=this.closingReason||{},this.closingReason.confirmed=t},_onDialogClick:function(t){for(var e=Object(n.b)(t).path,s=0,i=e.indexOf(this);s<i;s++){var o=e[s];if(o.hasAttribute&&(o.hasAttribute(\"dialog-dismiss\")||o.hasAttribute(\"dialog-confirm\"))){this._updateClosingReasonConfirmed(o.hasAttribute(\"dialog-confirm\")),this.close(),t.stopPropagation();break}}}},a=[i.a,o]},204:function(t,e,s){\"use strict\";s(2),s(26),s(30),s(43),s(63);const i=document.createElement(\"template\");i.setAttribute(\"style\",\"display: none;\"),i.innerHTML='<dom-module id=\"paper-dialog-shared-styles\">\\n  <template>\\n    <style>\\n      :host {\\n        display: block;\\n        margin: 24px 40px;\\n\\n        background: var(--paper-dialog-background-color, var(--primary-background-color));\\n        color: var(--paper-dialog-color, var(--primary-text-color));\\n\\n        @apply --paper-font-body1;\\n        @apply --shadow-elevation-16dp;\\n        @apply --paper-dialog;\\n      }\\n\\n      :host > ::slotted(*) {\\n        margin-top: 20px;\\n        padding: 0 24px;\\n      }\\n\\n      :host > ::slotted(.no-padding) {\\n        padding: 0;\\n      }\\n\\n      \\n      :host > ::slotted(*:first-child) {\\n        margin-top: 24px;\\n      }\\n\\n      :host > ::slotted(*:last-child) {\\n        margin-bottom: 24px;\\n      }\\n\\n      /* In 1.x, this selector was `:host > ::content h2`. In 2.x <slot> allows\\n      to select direct children only, which increases the weight of this\\n      selector, so we have to re-define first-child/last-child margins below. */\\n      :host > ::slotted(h2) {\\n        position: relative;\\n        margin: 0;\\n\\n        @apply --paper-font-title;\\n        @apply --paper-dialog-title;\\n      }\\n\\n      /* Apply mixin again, in case it sets margin-top. */\\n      :host > ::slotted(h2:first-child) {\\n        margin-top: 24px;\\n        @apply --paper-dialog-title;\\n      }\\n\\n      /* Apply mixin again, in case it sets margin-bottom. */\\n      :host > ::slotted(h2:last-child) {\\n        margin-bottom: 24px;\\n        @apply --paper-dialog-title;\\n      }\\n\\n      :host > ::slotted(.paper-dialog-buttons),\\n      :host > ::slotted(.buttons) {\\n        position: relative;\\n        padding: 8px 8px 8px 24px;\\n        margin: 0;\\n\\n        color: var(--paper-dialog-button-color, var(--primary-color));\\n\\n        @apply --layout-horizontal;\\n        @apply --layout-end-justified;\\n      }\\n    </style>\\n  </template>\\n</dom-module>',document.head.appendChild(i.content)},275:function(t,e,s){\"use strict\";var i=s(6),n=s(200),o=s(38),a=s(14);e.a=Object(i.a)(t=>(class extends(Object(o.b)([a.a,n.a],t)){static get properties(){return{withBackdrop:{type:Boolean,value:!0}}}}))},630:function(t,e,s){\"use strict\";s.r(e),s(75),s(204),s(62);var i=s(0),n=s(4),o=s(275);customElements.define(\"ha-voice-command-dialog\",class extends(Object(o.a)(n.a)){static get template(){return i[\"a\"]`\n    <style include=\"paper-dialog-shared-styles\">\n      iron-icon {\n        margin-right: 8px;\n      }\n\n      .content {\n        width: 450px;\n        min-height: 80px;\n        font-size: 18px;\n        padding: 16px;\n      }\n\n      .messages {\n        max-height: 50vh;\n        overflow: auto;\n      }\n\n      .messages::after {\n        content: \"\";\n        clear: both;\n        display: block;\n      }\n\n      .message {\n        clear: both;\n        margin: 8px 0;\n        padding: 8px;\n        border-radius: 15px;\n      }\n\n      .message.user {\n        margin-left: 24px;\n        float: right;\n        text-align: right;\n        border-bottom-right-radius: 0px;\n        background-color: var(--light-primary-color);\n        color: var(--primary-text-color);\n      }\n\n      .message.hass {\n        margin-right: 24px;\n        float: left;\n        border-bottom-left-radius: 0px;\n        background-color: var(--primary-color);\n        color: var(--text-primary-color);\n      }\n\n      .message.error {\n        background-color: var(--google-red-500);\n        color: var(--text-primary-color);\n      }\n\n      .icon {\n        text-align: center;\n      }\n\n      .icon paper-icon-button {\n        height: 52px;\n        width: 52px;\n      }\n\n      .interimTranscript {\n        color: darkgrey;\n      }\n\n      [hidden] {\n        display: none;\n      }\n\n      :host {\n        border-radius: 2px;\n      }\n\n      @media all and (max-width: 450px) {\n        :host {\n          margin: 0;\n          width: 100%;\n          max-height: calc(100% - 64px);\n\n          position: fixed !important;\n          bottom: 0px;\n          left: 0px;\n          right: 0px;\n          overflow: scroll;\n          border-bottom-left-radius: 0px;\n          border-bottom-right-radius: 0px;\n        }\n\n        .content {\n          width: auto;\n        }\n\n        .messages {\n          max-height: 68vh;\n        }\n      }\n    </style>\n\n    <div class=\"content\">\n      <div class=\"messages\" id=\"messages\">\n        <template is=\"dom-repeat\" items=\"[[_conversation]]\" as=\"message\">\n          <div class$=\"[[_computeMessageClasses(message)]]\">[[message.text]]</div>\n        </template>\n      </div>\n      <template is=\"dom-if\" if=\"[[results]]\">\n        <div class=\"messages\">\n          <div class=\"message user\">\n            <span>{{results.final}}</span>\n            <span class=\"interimTranscript\">[[results.interim]]</span>\n            â€¦\n          </div>\n        </div>\n      </template>\n      <div class=\"icon\" hidden$=\"[[results]]\">\n        <paper-icon-button icon=\"hass:text-to-speech\" on-click=\"startListening\"></paper-icon-button>\n      </div>\n    </div>\n`}static get properties(){return{hass:Object,results:{type:Object,value:null,observer:\"_scrollMessagesBottom\"},_conversation:{type:Array,value:function(){return[{who:\"hass\",text:\"How can I help?\"}]},observer:\"_scrollMessagesBottom\"}}}static get observers(){return[\"dialogOpenChanged(opened)\"]}initRecognition(){this.recognition=new webkitSpeechRecognition,this.recognition.onstart=function(){this.results={final:\"\",interim:\"\"}}.bind(this),this.recognition.onerror=function(){this.recognition.abort();var t=this.results.final||this.results.interim;this.results=null,\"\"===t&&(t=\"<Home Assistant did not hear anything>\"),this.push(\"_conversation\",{who:\"user\",text:t,error:!0})}.bind(this),this.recognition.onend=function(){if(null!=this.results){var t=this.results.final||this.results.interim;this.results=null,this.push(\"_conversation\",{who:\"user\",text:t}),this.hass.callApi(\"post\",\"conversation/process\",{text:t}).then(function(t){this.push(\"_conversation\",{who:\"hass\",text:t.speech.plain.speech})}.bind(this),function(){this.set([\"_conversation\",this._conversation.length-1,\"error\"],!0)}.bind(this))}}.bind(this),this.recognition.onresult=function(t){for(var e=this.results,s=\"\",i=\"\",n=t.resultIndex;n<t.results.length;n++)t.results[n].isFinal?s+=t.results[n][0].transcript:i+=t.results[n][0].transcript;this.results={interim:i,final:e.final+s}}.bind(this)}startListening(){this.recognition||this.initRecognition(),this.results={interim:\"\",final:\"\"},this.recognition.start()}_scrollMessagesBottom(){setTimeout(()=>{this.$.messages.scrollTop=this.$.messages.scrollHeight,0!==this.$.messages.scrollTop&&this.$.dialog.fire(\"iron-resize\")},10)}dialogOpenChanged(t){t?this.startListening():!t&&this.results&&this.recognition.abort()}_computeMessageClasses(t){return\"message \"+t.who+(t.error?\" error\":\"\")}})}}]);"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourceRoot":""}