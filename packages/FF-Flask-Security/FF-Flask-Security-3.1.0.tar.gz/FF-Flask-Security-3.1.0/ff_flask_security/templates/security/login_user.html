{% from "security/_macros.html" import render_field_with_errors, render_field %}
{% include "security/_messages.html" %}
<h1>{{ _('Login') }}</h1>
<form action="{{ url_for_security('tfa_view') if tfa_form else url_for_security('login') }}" method="POST" name="login_user_form">
  {% if (tfa_form): %}
    {{ tfa_form.hidden_tag() }}
    {{ render_field_with_errors(tfa_form.authentication_code) }}
    {{ render_field(tfa_form.email) }}
    {{ render_field(tfa_form.remember) }}
    {{ render_field(tfa_form.next) }}
  {% elif (login_user_form): %}
    {{ login_user_form.hidden_tag() }}
    {{ render_field_with_errors(login_user_form.email) }}
    {{ render_field_with_errors(login_user_form.password) }}
    {{ render_field_with_errors(login_user_form.remember) }}
    {{ render_field(login_user_form.next) }}
    {{ render_field(login_user_form.submit) }}
  {% endif %}
</form>
{% include "security/_menu.html" %}
