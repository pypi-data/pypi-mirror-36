"use strict";window.materialize=function(e){var t=window._materializeRoot||(window._materializeRoot=document.createDocumentFragment());return m.render(t,e,!0),t.firstChild},$(function(){function t(){$(document.body).removeClass("menu-open")}function n(){$(".category-submenu").each(function(e,t){$(t).removeClass("open")})}if($("#menu-button").click(function(e){n(),$("#site-search.mobile").removeClass("open"),e.stopPropagation(),$(document.body).hasClass("menu-open")?t():$(document.body).addClass("menu-open")}),$(document).on("click","#main-menu ul.menu-list > li a",function(e){e.preventDefault(),e.stopPropagation();var n=$(this).data("target-id");$(".category-submenu").each(function(e,t){$(t).attr("id")!=n&&$(t).removeClass("open")});var t=$("#"+n);if(t.length){var a=t.hasClass("open");t.toggleClass("open",!a)}}),$(window).click(function(){n()}),$(".category-submenu").click(function(e){e.stopPropagation(),$(e.target).hasClass("fa-close")&&n()}),window.onresize=function(){n(),$(window).width()<768&&t()},window.Masonry){var a=window.Masonry;$(".category-menu-content").each(function(e,t){new a(t,{itemSelector:".submenu-container",columnWidth:".submenu-container",percentPosition:!0})})}});var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}function serializeForm(e){for(var t=e.serializeArray(),n={},a=0;a<t.length;a++){var i,o=t[a];i=null!==o.value?o.value:"",void 0!==n[o.name]?($.isArray(n[o.name])||(n[o.name]=[n[o.name]]),n[o.name].push(i)):n[o.name]=i}return n}function renderFormErrors(e,t){for(var n in t){var a=t[n];for(var i in a){var o=a[i].join(" ");if("__all__"===i)e.parent().find(".errors").append('<div class="alert alert-danger">'+o+"</div>");else e.find(":input[name='"+n+"-"+i+"']").parent(".form-group").append("<span class='help-block error-block'>"+o+"</span>").addClass("has-error")}}}function clearErrors(e){e.find(".has-error").removeClass("has-error"),e.find(".error-block").remove(),e.parent().find(".errors").empty()}function changeLanguage(){var e=document.createElement("form");e.method="POST",e.action=window.ShuupAdminConfig.browserUrls.setLanguage;var t=document.createElement("input");t.type="hidden",t.name="language",t.id="language-field",t.value=$(this).data("value"),e.appendChild(t),document.body.appendChild(e),e.submit()}function activateSelect(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return void 0===t?e.select2($.extend(!0,{language:"xx"},a)):e.select2($.extend(!0,{language:"xx",minimumInputLength:3,ajax:{url:window.ShuupAdminConfig.browserUrls.select,dataType:"json",data:function(e){return{model:t,searchMode:n,search:e.term}},processResults:function(e){return{results:$.map(e.results,function(e){return{text:e.name,id:e.id}})}}}},a))}function activateSelects(){$("select").each(function(e,t){var n=$(t);n.hasClass("select2-hidden-accessible")||n.hasClass("no-select2")||activateSelect(n,n.data("model"),n.data("search-mode"))})}function updateOrdering(e){var n="";window.targetElement.find("input[type=checkbox]").each(function(e,t){n+=$(t).attr("name")+"|"}),$("#ordering").text(n)}function removeFromActive(e){e.preventDefault();var t=$(this).data("label"),n=$(this).data("name"),a=$("#target-placeholder li").html().replace(/NAME/g,n).replace(/LABEL/g,t);window.sourceElement.append($("<li>").html(a)),$(this).closest("li").remove(),updateOrdering()}function addToActive(e){e.preventDefault();var t=$(this).data("label"),n=$(this).data("name"),a=$("#source-placeholder li").html().replace(/NAME/g,n).replace(/LABEL/g,t);window.targetElement.append($("<li>").html(a)),$(this).closest("li").remove(),updateOrdering()}function activateDropzone(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e.length){var n="#"+e.attr("id"),a=$(n).data().upload_path,i=$(n).data().add_remove_links,o=window.ShuupAdminConfig.browserUrls.media,r=$.extend(!0,{url:o+"?action=upload&path="+a,params:{csrfmiddlewaretoken:window.ShuupAdminConfig.csrf},addRemoveLinks:"True"==i,dictRemoveFile:gettext("Clear"),autoProcessQueue:!0,uploadMultiple:!1,parallelUploads:1,maxFiles:1,dictDefaultMessage:gettext("Drop files here or click to browse."),clickable:!1,accept:function(e,t){"images"===$(n).data().kind&&e.type.indexOf("image")<0?t(gettext("only images can be uploaded!")):t()}},t),s=new Dropzone(n,r);s.on("addedfile",t.onAddedFile||function(e){1===r.maxFiles&&1<s.files.length&&s.removeFile(s.files[0])}),s.on("removedfile",t.onSuccess||function(e){$(n).find("input").val("")}),s.on("success",t.onSuccess||function(e){e.xhr&&(e=JSON.parse(e.xhr.responseText).file),$(n).find("input").val(e.id)}),s.on("queuecomplete",t.onQueueComplete||$.noop),$(n).on("click",function(e){window.BrowseAPI.openBrowseWindow({kind:"media",disabledMenus:["delete","rename"],filter:$(n).data().kind,onSelect:function(e){e.name=e.text,$(n).find("input").val(e.id),$(n).find(".dz-preview").remove(),s.emit("addedfile",e),e.thumbnail&&s.emit("thumbnail",e,e.thumbnail),s.emit("success",e),s.emit("complete",e)}})});var c=$(n).data();c.url&&(s.files.push(c),s.emit("addedfile",c),c.thumbnail&&s.emit("thumbnail",c,c.thumbnail),s.emit("complete",c))}else console.error("[dropzone.js] Unable to find requested element ",e)}function activateDropzones(){$("div[data-dropzone='true']").each(function(e,t){var n=$(t);n.attr("id").includes("__prefix__")||0!==n.find(".dz-message").length||activateDropzone(n)})}function createQuickIframe(e){window.closeQuickIFrame();var t=document.createElement("div");t.id="create-object-overlay";var n=document.createElement("div");n.id="create-object-content-pane",n.className="content-pane",t.appendChild(n);var a=document.createElement("i");a.className="fa fa-times-circle-o fa-3x text-danger";var i=document.createElement("a");i.className="close-btn",i.href="#",i.onclick=function(e){void 0!==e&&e.preventDefault(),window.closeQuickIFrame()},i.appendChild(a),n.appendChild(i);var o=document.createElement("iframe");o.frameBorder=0,o.width="100%",o.height="100%",o.id="create-object-iframe",o.onload=function(){$("#create-object-content-pane").addClass("open"),$("#create-object-iframe").contents().find(".quick-add-btn").remove(),$("#create-object-iframe").contents().find(".edit-object-btn").remove()},o.setAttribute("src",e),n.appendChild(o),$(document.body).append(t)}$(function(){var n=null;function a(e){var t=e.results();if(null!==t&&0===t.length)return m("div",gettext("No results."));var a,i=!!e.showShortcuts(),n=_.partition(t,"isAction"),o=_slicedToArray(n,2),r=o[0],s=o[1],c=(a={s:!0},function(e){var t=("123456789"+e.toLowerCase().replace(/[^a-z0-9]+/g,"")+"abcdefghijklmnopqrstuvwxyz").split(""),n=_.detect(t,function(e){return!a[e]});return null!==n&&(a[n]=!0),n}),l=function(e,t){var n=i?c(e.text):null,a={href:e.url,accesskey:n};return e.target&&(a.target=e.target),m("li",{key:e.url},m(t,a,[e.icon?m("i."+e.icon):null,e.text,n?m("span.key",n.toUpperCase()):null]))},d=m("div",_(s).groupBy("category").map(function(e,t){return m("div.result-category",[m("h3.divider",[""+t]),m("ul",_.map(e,function(e){return l(e,"a.result")}))])}).value()),u=m("div",m("ul",_.map(r,function(e){return l(e,"a.btn.btn-gray")})));return m("div.container-fluid",m("div.results",{id:"site-search-standard-results"},d),m("div.additional",{id:"site-search-action-results"},u))}function i(){var t=this;t.results=m.prop(null),t.showShortcuts=m.prop(!1),this.doSearch=function(e){if(!e)return t.results([]),void m.redraw();$.ajax({url:window.ShuupAdminConfig.searchUrl,data:{q:e}}).done(function(e){t.results(e.results),m.redraw()})};var e=function(e){18===e.keyCode&&(t.showShortcuts("keydown"===e.type),m.redraw())};document.addEventListener("keydown",e,!1),document.addEventListener("keyup",e,!1)}var t=_.debounce(function(e){if(!n){var t=document.getElementById("site-search-results");n=m.mount(t,{controller:i,view:a})}n.doSearch(e)},500);$(document).click(function(e){$(e.target).closest("#site-search").length||$("#site-search-results").slideUp(400,"easeOutCubic")}),$(".mobile-search-dropdown").click(function(e){e.stopPropagation()}),$("#site-search").find(".mobile").click(function(){$(this).hasClass("open")&&$("#site-search-results").slideUp(400,"easeOutCubic")}),$(window).resize(_.debounce(function(){var e=$(window).outerWidth(!0),t=$("#site-search-results");t.is(":visible")&&e<768&&t.slideUp(400,"easeOutCubic")},100));var e=$("#site-search-input, #site-search-input-mobile");e.on("keyup",function(){var e=$(this).val();0<e.length?($("#site-search-results").slideDown(300,"easeInSine"),t(e)):$("#site-search-results").slideUp(400,"easeOutSine")}),e.on("focus",function(){0<$(this).val().length&&$("#site-search-results").slideDown(300,"easeInSine")})}),$(void $("[data-toggle='popover']").each(function(e,t){"manual"!==$(t).data("trigger")?$(t).popover():isTouchDevice()?$(t).unbind("hover mouseenter mouseleave"):($(t).on("mouseenter",function(){$(t).popover("show")}),$(t).on("mouseleave",function(){$(t).popover("hide")}))})),$(($('[data-toggle="tooltip"]').tooltip({delay:{show:750,hide:100}}),void $("#dropdownMenu").tooltip({delay:{show:750,hide:100}}))),$(function(){function e(){$(".timesince").each(function(){var e=$(this),t=e.data("ts");if(t){var n=moment(t);n.isValid()&&e.text(n.fromNow())}})}e(),setInterval(e,6e4)}),window.Messages=function(o){var t=[],n=null;function a(){n&&(n.classList.remove("clear"),n.classList.add("visible"))}function i(){n&&(n.classList.remove("visible"),n.classList.add("clear"),setTimeout(e,2e3))}function e(){for(n.classList.remove("clear");n&&n.firstChild;)n.removeChild(n.firstChild)}function r(e){for(var t=e.target;t;){if("message-container"===t.id)return;t=t.parentNode}i()}function s(e){var t=o.createElement("div"),n=e.tags||[];_.isString(n)&&(n=n.split(" ")),t.className="message "+n.join(" ");var a=o.createElement("span"),i=o.createTextNode(e.text||"no text");return a.appendChild(i),t.appendChild(a),t}var c=_.debounce(function e(){if(t.length){if(!o.body)return setTimeout(e,50);for(n||((n=o.createElement("div")).id="message-container",o.body.appendChild(n),o.addEventListener("click",r,!1));0<t.length;)n.appendChild(s(t.shift()));_.defer(a)}},50);return{enqueue:function(e){t.push(e),c()},hide:i}}(window.document),window.BrowseAPI=function(){var c={};return window.addEventListener("message",function(e){var t=e.data;if(t.pick){var n=c[t.pick.id];if(n){n.popup.close();var a=t.pick.object;a&&(_.isFunction(n.onSelect)&&n.onSelect.call(this,a),delete c[t.pick.id])}}},!1),{openBrowseWindow:function(e){var t=e.filter,n=e.disabledMenus,a=e.kind,i=window.ShuupAdminConfig.browserUrls[a];if(!i)throw new Error(gettext("No browser URL for kind:")+" "+a);"string"!=typeof t&&(t=JSON.stringify(t));var o="m-"+ +new Date,r=_.compact(["popup=1","kind="+a,"pick="+o,t?"filter="+t:null,n?"disabledMenus="+n.join(","):null]).join("&"),s=window.open(i+(-1<i.indexOf("?")?"&":"?")+r,"browser_popup_"+o,"resizable,menubar=no,location=no,scrollbars=yes");return c[o]=_.extend({popup:s,$container:null,onSelect:null},e)}}}(),$(function(){$(document).on("click",".browse-widget .browse-btn",function(){var n=$(this).closest(".browse-widget");if(n.length){var e=n.data("browse-kind"),t=n.data("filter");try{return window.BrowseAPI.openBrowseWindow({kind:e,filter:t,onSelect:function(e){n.find("input").val(e.id);var t=n.find(".browse-text");t.text(e.text),t.prop("href",e.url||"#")}})}catch(e){return alert(e),!1}}}),$(document).on("click",".browse-widget .clear-btn",function(){var e=$(this).closest(".browse-widget");if(e.length){var t=e.data("empty-text")||"";e.find("input").val("");var n=e.find(".browse-text");n.text(t),n.prop("href","#")}}),$(document).on("click",".browse-widget .browse-text",function(e){var t=$(this).prop("href");if(/#$/.test(t))return e.preventDefault(),!1})}),$(function(){function e(e){if(e.length){var n,a,t=e.data("navigatee"),i=$("#"+t);if(i.length)m.mount(e[0],(n=i.find(".content-block"),(a=_.compact(_.map(n,function(e){var t=$(e),n=t.find(".block-title"),a=n.text();if(a){if(!e.id){var i=_.kebabCase(a);""==i&&function(e){var t=0,n=e.length,a=0;if(0<n)for(;a<n;)t=(t<<5)-t+e.charCodeAt(a++)|0;t<0&&(t=0-t)}(a),e.id=i+"-section"}return{el:e,id:e.id,title:a,iconClass:n.find(".fa").attr("class"),errorClass:t.find(".has-error").length?"normal":null}}}))).length?{view:function(n){var a=n.currentItemId();return m("div.sidebar-list",n.navigationListItems().map(function(e){var t=(e.id===a?".active":"")+(e.errorClass?".errors":"");return m("a.sidebar-list-item"+t,{key:e.id,href:"#"+e.id,onclick:function(){return n.showSection(e),!1}},[e.iconClass?m("i",{className:e.iconClass}):null,e.title,e.errorClass?m("div.error-indicator."+e.errorClass,m("i.fa.fa-exclamation-circle")):null])}))},controller:function(){var t=this;t.showSection=function(e){n.hide(),e.errorClass&&(e.errorClass="dismissed"),$("#"+e.id).show(),t.currentItemId(e.id)},t.currentItemId=m.prop(null),t.navigationListItems=m.prop(a),t.showSection(a[0])}}:null))}}if($(".section-navigation, #section-navigation").each(function(){e($(this))}),location.hash){var t=$("a[href='"+location.hash+"']");t.length?t.trigger("click"):location.hash=""}}),$(function(){var e=$(".content-block"),t=e.find(".content-wrap");$(".toggle-contents").click(function(e){var t=$(this).closest(".content-block").find(".content-wrap");e.preventDefault(),t.hasClass("collapsing")||(t.collapse("toggle"),$(this).closest(".title").toggleClass("open"))}),e.each(function(){$(this).find(".has-error").length&&$(this).find(".block-title").addClass("mobile-error-indicator")}),$("a.sidebar-list-item.errors").first().trigger("click"),$(window).resize(_.debounce(function(){t.css("height",""),$("#main-content").css("margin-top",$(".support-nav-wrap").height()+15)},100)),$(window).ready(function(){$("#main-content").css("margin-top",$(".support-nav-wrap").height()+15)})}),window.setNextActionAndSubmit=function(e,t){var n=$("#"+e);if(n.length){var a=n.find("input[name=__next]");a.length||(a=$("<input>",{type:"hidden",name:"__next"}),n.append(a)),a.val(t),n.submit()}},$(void $(".language-dependent-content").each(function(){var i=$(this),o=!1;i.find(".nav-tabs li").each(function(){var e=$(this),t=e.data("lang");if(t){var n=i.find(".tab-pane[data-lang="+t+"]");if(n&&0<n.find(".has-error").length){var a=e.find("a");a.append($(' <div class=error-indicator><i class="fa fa-exclamation-circle"></i></div>')),o||(a.tab("show"),o=!0)}}})})),function(o){var a='input[type="submit"], input[type="image"], button:not([type]), button[type="submit"]',r=["action","method","enctype","target","novalidate"];o.fn.formSubmissionAttributes=function(){this.each(function(){var i=o(this),e=i.find(a),t=i.attr("id");if(t){var n=o('input[form="'+t+'"],button[form="'+t+'"]');n=n.filter(a),e=e.add(n)}o.each(r,function(e,t){i.data("o"+t,i.attr(t))}),e.on("click",function(){var a=o(this);o.each(r,function(e,t){var n=a.is("[form"+t+"]")?a.attr("form"+t):i.data("o"+t);i.attr(t,n)})})})},(0<window.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv\:11\./))&&o(document).on("click","[type=submit][form]",function(e){e.preventDefault();var t=o(this).attr("form"),n=o("#"+t);n.formSubmissionAttributes(),n.submit()})}(jQuery),$(function(){$(".form-control.datetime").datetimepicker({format:"yyyy-mm-dd hh:ii",autoclose:!0,todayBtn:!0,todayHighlight:!0,fontAwesome:!0}),$(".form-control.date").datetimepicker({format:"yyyy-mm-dd",autoclose:!0,todayBtn:!0,todayHighlight:!0,fontAwesome:!0,minView:2})}),$(function(){$(".languages li a").click(changeLanguage)}),$(function(){$.fn.select2.amd.define("select2/i18n/xx",[],function(){return{errorLoading:function(){return gettext("The results could not be loaded")},inputTooLong:function(e){var t=e.input.length-e.maximum,n=ngettext("Please delete %s character","Please delete %s characters",t);return interpolate(n,[t])},inputTooShort:function(e){var t=e.minimum-e.input.length;return interpolate(gettext("Please enter %s or more characters"),[t])},loadingMore:function(){return gettext("Loading more results...")},maximumSelected:function(e){var t=ngettext("You can only select %s item","You can only select %s items",e.maximum);return interpolate(t,[e.maximum])},noResults:function(){return gettext("No results found")},searching:function(){return gettext("Searching...")}}}),activateSelects()}),function(c){c(document).ready(function(){c("#top-header .show-tour-li").on("click","a",function(e){e.preventDefault(),c.tour()})}),c.tour=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if("setPageSteps"!==e){var i=new Shepherd.Tour({defaults:{classes:"shepherd-theme-arrows",scrollTo:!0,showCancelLink:!0}}),o=[];return o=this.pageSteps&&1<this.pageSteps.length?this.pageSteps:(this.pageSteps||[]).concat(function(e){if("home"!==e&&void 0!==e)return[];if(0!==c("#main-menu").position().left)return[];var t=[];return 0<c("li a[data-target-id='quicklinks']").length&&t.push({title:gettext("Quick Links"),text:[gettext("Quick Links to your most used features.")],attachTo:"li a[data-target-id='quicklinks'] right"}),0<c("li a[data-target-id='category-1']").length&&t.push({title:gettext("Orders"),text:[gettext("Track and filter your customers’ orders here.")],attachTo:"li a[data-target-id='category-1'] right"}),0<c("li a[data-target-id='category-2']").length&&t.push({title:gettext("Products"),text:[gettext("All your exciting products and features are located here.")],attachTo:"li a[data-target-id='category-2'] right"}),0<c("li a[data-target-id='category-3']").length&&t.push({title:gettext("Contacts"),text:[gettext("All your customer data is located here. Target and organize your clients details your way!")],attachTo:"li a[data-target-id='category-3'] right"}),0<c("li a[data-target-id='category-5']").length&&t.push({title:gettext("Campaigns"),text:[gettext("Great loyalty tool for creating marketing, campaigns, special offers and coupons to entice your shoppers!"),gettext("Set offers based on their previous purchase behavior to up- and cross sale your inventory.")],attachTo:"li a[data-target-id='category-5'] right"}),0<c("li a[data-target-id='category-9']").length&&t.push({title:gettext("Content"),text:[gettext("The make-over tool to customize you site themes, add pages and product carousels. Incorporate any media to make your store pop!")],attachTo:"li a[data-target-id='category-9'] right"}),0<c("li a[data-target-id='category-4']").length&&t.push({title:gettext("Reports"),text:[gettext("Your reporting tool to build and analyze your consumer behavior information that can assist with your business decisions.")],attachTo:"li a[data-target-id='category-4'] right"}),0<c("li a[data-target-id='category-6']").length&&t.push({title:gettext("Shops"),text:[gettext("Place for your Shop specific settings. You can customize taxes, currencies, customer groups, and many other things in this menu.")],attachTo:"li a[data-target-id='category-6'] right"}),0<c("li a[data-target-id='category-7']").length&&t.push({title:gettext("Addons"),text:[gettext("This is your connection interface. Addons and other systems you use can be attached to your store through powerful data connections."),gettext("Supercharge your site and gather crazy amounts of data with integrations to CRMs and ERPs, POS’s and PIM’s, or any other acronym you can think of.")],attachTo:"li a[data-target-id='category-7'] right"}),0<c("li a[data-target-id='category-8']").length&&t.push({title:gettext("Settings"),text:[gettext("The nuts and bolts of your store are found here. From individual country tax-regulations to your contact details.")],attachTo:"li a[data-target-id='category-8'] right"}),0<c("#site-search").length&&c("#site-search").is(":visible")&&t.push({title:gettext("Search"),text:[gettext("Lost and cannot find your way? No worries, you can search contacts, settings, add-ons and more features from here.")],attachTo:"#site-search bottom"}),0<c(".shop-btn.visit-store").length&&t.push({title:gettext("View your storefront"),text:[gettext("Preview your shop and all the cool features you have created!")],attachTo:".shop-btn.visit-store left"}),t.push({title:gettext("We're done!"),text:[gettext("It was nice to show you around!"),gettext("If you need to run it again, fire it up from the menu in the top right.")]}),t}(e.tourKey)),c.each(o,function(e,t){var n=null;0===e&&(n="first"),e===o.length-1&&(n="last");var a="";(t=c.extend({},t,{buttons:function(e){var t=[];"first"!==e&&"last"!==e&&t.push({text:"Previous",classes:"btn shepherd-button-secondary",action:i.back});"last"===e?t.push({text:"OK",classes:"btn btn-primary",action:i.cancel}):t.push({text:"Next",classes:"btn btn-primary",action:i.next});return t}(n)})).icon?(a+="<div class='clearfix'>",a+="<div class='pull-left'>",a+="<div class='icon'>",a+="<img src='"+t.icon+"' />",a+="</div>",a+="</div>",a+="<div class='step-with-icon'>",a+=r(t.text),a+=s(t.helpPage),a+="</div>",a+="</div>"):t.banner?(a+="<div>",a+="<div class='banner'>",a+="<img src='"+t.banner+"' />",a+="</div>",a+="<div class='step-with-banner'>",a+=r(t.text),a+=s(t.helpPage),a+="</div>",a+="</div>"):(a+=r(t.text),a+=s(t.helpPage)),t.text=a,i.addStep("step-"+e,t)}),e.tourKey&&i.on("cancel",function(){c.post(e.url,{csrfmiddlewaretoken:window.ShuupAdminConfig.csrf,tourKey:e.tourKey})}),i.start(),i}function r(e){for(var t="",n=0;n<e.length;n++)t+="<p class='lead'>"+e[n]+"</p>";return t}function s(e){var t="";e&&(t+="<br>",t+="<p class='text-center'>",t+="<a href='"+(window.ShuupAdminConfig.docsPage+e)+"' class='btn btn-inverse btn-default', target='_blank'>",t+="<i class='fa fa-info-circle'></i> "+gettext("Learn more at the Shuup Help Center"),t+="</a>",t+="</p>");return t}this.pageSteps=t}}(jQuery),$(".lightbox").imageLightbox({button:!0,overlay:!0}),window.targetElement=null,window.sourceElement=null,window.activateSortable=function(e,t){var n=$("#"+e),a=$("#"+t);window.targetElement=n,window.sourceElement=a;var i=document.getElementById(e);Sortable.create(i,{handle:".sorting-handle",onEnd:function(e){updateOrdering()}});updateOrdering(),$(document).on("click",".btn-remove-sortable",removeFromActive),$(document).on("click",".btn-add-sortable",addToActive)},$(document).on("keyup",".autoupdate-slug",function(){var e=$(this).val();$(this).parent().next().find(".slugfield").val(e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""))}),$(function(){Dropzone.autoDiscover=!1,activateDropzones()}),window.addToSelect2=function(e,t,n){var a=new Option(n,t,!0,!0);if($("select[name='"+e+"']").append(a).trigger("change"),e.includes("primary_category")){var i=$("select[name*='categories']");0<i.length&&(a=new Option(n,t,!0,!0),i.append(a).trigger("change"))}window.closeQuickIFrame()},window.closeQuickIFrame=function(){$("#create-object-overlay").remove()},window.setupQuickAdd=function(e){$(e).on("click",function(e){e.preventDefault(),createQuickIframe($(this).data("url"))})},window.setupEditButton=function(e){$(e).each(function(){var e=this,t=$(e).data("target");if(t){var n=$("[name='"+t+"']");n.val()||$(e).hide(),n.on("change",function(){$(this).val()?$(e).show():$(e).hide()})}}),$(e).on("click",function(e){e.preventDefault();var t=$(e.currentTarget).data("target");if(t){var n=$("[name='"+t+"']"),a=$(e.currentTarget).data("edit-model"),i=$(n).val();if(i)createQuickIframe(window.ShuupAdminConfig.browserUrls.edit+"?mode=iframe&model="+a+"&id="+i)}})},$(function(){window.setupQuickAdd($(".quick-add-btn a.btn")),window.setupEditButton($(".edit-object-btn a.btn"))});var getMediaButton=function(t){return function(e){return $.summernote.ui.button({contents:$.summernote.ui.icon($.summernote.options.icons.picture),tooltip:$.summernote.lang[$.summernote.options.lang].image.image,click:function(){window.BrowseAPI.openBrowseWindow({kind:"media",clearable:!0,onSelect:function(e){t.summernote("insertImage",e.url)}})}}).render()}};function activateEditor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};function a(e){e.preventDefault(),e.stopImmediatePropagation()}var n=e.summernote($.extend(!0,{height:200,popatmouse:!1,disableDragAndDrop:!0,callbacks:{onBlur:function(){e.parent().find("textarea.hidden").val($(this).summernote("code"))},onPaste:function(e){var t=e.originalEvent.clipboardData;if(t)for(var n=0;n<t.items.length;n+=1)if("file"===t.items[n].kind)return void a(e)}},toolbar:$.summernote.options.toolbar.filter(function(e){return"insert"!==e[0]}).concat([["insert",["link","media"]]]),buttons:{media:getMediaButton(e)}},t));return e.parent().find(".note-editable").off("drop"),e.parent().find(".note-editable").on("drop",function(e){a(e)}),e.parent().find(".note-codable").on("blur",function(){e.parent().find("textarea").val(e.summernote("code"))}),n}function activateEditors(){$(".summernote-editor").each(function(e,t){var n=$(t);if(0===n.parent().find(".note-editor").length){var a=n.parent().find("textarea").data()||{},i={},o=Object.keys(a);o.includes("height")&&(i.height=a.height),activateEditor(n,i),o.includes("noresize")&&n.parent().find(".note-statusbar").hide()}})}$(function(){activateEditors()}),$(function(){$(".hex-color-picker").colorpicker({format:"hex",horizontal:!0})});
//# sourceMappingURL=base.js.map
